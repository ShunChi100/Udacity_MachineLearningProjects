<!DOCTYPE html>
<!-- saved from url=(0044)https://review.udacity.com/#!/reviews/623121 -->
<html data-ng-app="udacity.grading" data-enforce-browser="" lang="en" class="ng-scope gr__review_udacity_com"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style><style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll;}</style><style type="text/css">@charset "UTF-8";[ng\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>
    <!--[if lte IE 9]>
    <script type="text/javascript">
      window.location = 'https://www.udacity.com/upgrade';
    </script>
    <![endif]-->
    <title>Udacity Reviews</title>
    
    <link rel="shortcut icon" href="https://review.udacity.com/assets/images/favicon.ico">
    <meta name="description" content="Discover online classes taught by top instructors and industry experts. Take courses at your own pace.">

    <meta name="robots" content="noodp">

    <!--
      These properties are here so social shares of review pages works
      properly. We decided to let them apply to every page on the site
      because we only expect people to share the review pages.

      Guidelines obtained from https://moz.com/blog/meta-data-templates-123
    -->

    <!-- facebook -->
    <meta property="og:title" content="Look at my Udacity Project Feedback!">
    <meta property="og:description" content="A review of my work and personalized tips to improve.">
    <meta property="og:image" content="https://s3-us-west-1.amazonaws.com/udacity-content/images/reviews/facebook-thumbnail-neutral.png ">

    <!-- twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@udacity">
    <meta name="twitter:title" content="Udacity Project Feedback">
    <meta name="twitter:description" content="A review of my work and personalized tips to improve.">
    <!-- "Twitter Summary card images must be at least 120x120px" -->
    <meta name="twitter:image" content="https://s3-us-west-1.amazonaws.com/udacity-content/images/reviews/twitter-thumbnail-neutral.png ">

    <meta name="application-name" content="Udacity">
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <meta name="msapplication-TileImage" content="assets/img/logos/udacity/windows_tile/udacity-full-144x144.png">

    <meta name="google-site-verification" content="ELX2btu3VElBKIdvkGj5ESBnJh_Dg9PnWjuCwVkPEkA">

    <meta http-equiv="X-UA-Compatible" content="requiresActiveX=true">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="apple-touch-icon" href="https://review.udacity.com/assets/images/apple-touch-icon.png">

    <link type="text/plain" rel="author" href="http://udacity.com/humans.txt">

    <link href="./Udacity_Reviews_V2_files/css" rel="stylesheet" type="text/css">
    <link href="./Udacity_Reviews_V2_files/css(1)" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="./Udacity_Reviews_V2_files/udacity-base.min.css" type="text/css">
    <!-- ngIf: googleBranded -->

    <!-- inject:css -->
    <link rel="stylesheet" href="./Udacity_Reviews_V2_files/grading_29bb7e1c.css">
    <!-- endinject -->

    <style>
    @font-face {
      font-family: 'Glyphicons Halflings';

      src: url('/assets/fonts/glyphicons/glyphicons-halflings-regular.eot');
      src: url('/assets/fonts/glyphicons/glyphicons-halflings-regular.eot?#iefix') format('embedded-opentype'), url('/assets/fonts/glyphicons/glyphicons-halflings-regular.woff2') format('woff2'), url('/assets/fonts/glyphicons/glyphicons-halflings-regular.woff') format('woff'), url('/assets/fonts/glyphicons/glyphicons-halflings-regular.ttf') format('truetype'), url('/assets/fonts/glyphicons/glyphicons-halflings-regular.svg#glyphicons_halflingsregular') format('svg');
    }
    </style>
    <script type="text/javascript" async="" src="./Udacity_Reviews_V2_files/amplitude-3.4.0-min.gz.js"></script><script src="./Udacity_Reviews_V2_files/airbrake.min.js" async=""></script><script src="./Udacity_Reviews_V2_files/airbrake.min.js" async=""></script><script type="text/javascript" async="" src="./Udacity_Reviews_V2_files/analytics.min.js"></script><script type="text/javascript">
      var segment_write_key = "toT8LUD8hh9KKz18k1i8l8AnAJlF27VY"; // production key for segment
    </script>
    <script type="text/javascript">
      !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
        analytics.load(segment_write_key);
      }}();
    </script>

  </head>
  <body data-modal-anti-scroll-helper="" class="responsive ng-class:{&#39;google-certs&#39;: googleBranded} ng-scope" ng-controller="MainCtrl as main" data-gr-c-s-loaded="true" style="">
    <!-- ngInclude: main.pageContext.headerURL --><div ng-include="main.pageContext.headerURL" class="ng-scope"><header class="navbar site-nav navbar-inverse navbar-static-top ng-scope" role="navigation"> <div class="container"> <div class="navbar-header"> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse"> <span class="sr-only ng-scope" translate="">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="logo navbar-brand" href="https://udacity.com/" id="header-logo"> <img alt="Udacity Logo" src="./Udacity_Reviews_V2_files/logo.min.svg"> </a> </div> <nav class="navbar-collapse collapse text-center-xs" id="navbar-collapse" role="navigation"> <ul class="nav navbar-nav navbar-right"> <!-- ngIf: isGrader() --> <!-- ngIf: isGrader() --> <li> <a data-ng-click="main.logout()" href="https://review.udacity.com/" translate="" class="ng-scope">Logout</a> </li> </ul> <ul class="nav navbar-nav navbar-right"> <li class="dropdown"> <ul class="dropdown-menu"> <a data-ng-click="main.logout()" href="https://review.udacity.com/" translate="" class="ng-scope">Logout</a> </ul> </li> </ul> </nav> </div> </header> </div>
    <div id="page-content" data-qualaroo-survey-info-hack="">
      <div loading-container="" class="container-fluid"><div ng-show="loading" class="row ng-hide" style=""> <div class="col-sm-6 col-sm-offset-3 text-center"> <div class="row row-gap-huge"></div> <img src="./Udacity_Reviews_V2_files/loading.gif"> <div class="row row-gap-huge"></div> </div> </div> <div ng-show="!loading" class="" style=""> <div ng-transclude="">
        <div class="row row-gap-medium ng-scope ng-isolate-scope ng-hide fadeOutUp animated" ng-show="!!message &amp;&amp; !dismissed" ng-class="{fadeInDown: !!message, fadeOutUp: dismissed, animated: !!message || dismissed}" alert-box="" style=""> <div class="col-md-offset-2 col-md-8"> <div class="alert  hr-slim alert-info"> <button type="button" ng-click="dismiss()" class="close" aria-label="Close"> <span aria-hidden="true">×</span> </button> <span ng-bind-html="message" class="ng-binding"></span> </div> </div> </div>
        <!-- uiView:  --><div ui-view="" autoscroll="true" class="ng-scope"><div class="row ng-scope"> <div class="col-xs-12 col-lg-10 col-lg-offset-1"> <!-- ngIf: submission.previous_submission_id --> <div class="review-header"> <div class="project-label text-uppercase text-center ng-scope" translate="">Project</div> <div class="project-name text-center ng-binding">Finding Donors for CharityML</div> <!-- ngIf: currentProject.nanodegree_title --><div class="nanodegree-link text-center ng-binding ng-scope" ng-if="currentProject.nanodegree_title"> A part of the Machine Learning Engineer Nanodegree Program </div><!-- end ngIf: currentProject.nanodegree_title --> </div> <div class="row row-gap-medium"></div> <div class="review-container"> <ul class="nav nav-tabs nav-justified" ng-hide="isUngradeable()"> <!-- ngIf: hasFeedback --><li ng-if="hasFeedback" ng-class="{&#39;active&#39;: isCurrentTab(&#39;feedback&#39;)}" class="ng-scope active" style=""> <a href="https://review.udacity.com/" ng-click="showTab(&#39;feedback&#39;)" class="ng-binding">Project Review</a> </li><!-- end ngIf: hasFeedback --> <!-- ngIf: showCode --><li ng-if="showCode" ng-class="{&#39;active&#39;: isCurrentTab(&#39;code&#39;)}" class="ng-scope" style=""> <a href="https://review.udacity.com/" ng-click="showTab(&#39;code&#39;)" class="ng-binding"> Code Review&nbsp; <!-- ngIf: commentsCount > 0 --> </a> </li><!-- end ngIf: showCode --> <!-- ngIf: annotation_link --> <li ng-class="{&#39;active&#39;: isCurrentTab(&#39;notes&#39;)}" class="" style=""> <a href="https://review.udacity.com/" ng-click="showTab(&#39;notes&#39;)" class="ng-binding">Notes</a> </li> <!-- ngIf: userCanCreateAudits() && !auditTabState.visible --> <!-- ngIf: auditTabState.visible --> </ul> <div class="row review-tab-body"> <div class="col-sm-10 col-sm-offset-1"> <div ng-show="isUngradeable()" class="ungradeable-tab ng-hide"> <h3 class="result-label ng-scope" translate="">Unable to review</h3> <p class="ungradeable-info ng-scope" translate="">Your project could not be reviewed. Please resubmit after you address the issue noted by the reviewer.</p> <p class="result-reason ng-isolate-scope" marked="submission.result_reason"></p> <div class="row row-gap-small"></div> <!-- ngIf: isResubmittable() --> <!-- ngIf: submission.archive_url --><div ng-if="submission.archive_url" class="row row-gap-small ng-scope"> <div class="col-xs-12 text-center wide-and-bold"> <a href="https://udacity-reviews-uploads.s3.amazonaws.com/_submissions/zipfile/623121/archive.zip" download="" class="ng-binding"><img src="./Udacity_Reviews_V2_files/download-icon.svg" class="img-initial icon-medium">Download project files</a> </div> </div><!-- end ngIf: submission.archive_url --> <!-- ngIf: submission.url --> <div class="row row-gap-small">&nbsp;</div> </div> <div ng-hide="isUngradeable()" class=""> <div class="row row-gap-medium"></div> <section ng-show="isCurrentTab(&#39;notes&#39;)" class="ng-hide" style=""> <!-- ngIf: pastReviews !== undefined --><div reviews-list="" ng-if="pastReviews !== undefined" reviews="pastReviews" this-review="submission" class="ng-scope ng-isolate-scope"><h2 class="review-list-name current-review-name h-slim"> <!-- ngIf: thisReview.status !== 'canceled' --><span ng-if="thisReview.status !== &#39;canceled&#39;" class="ng-binding ng-scope"> Review #3 </span><!-- end ngIf: thisReview.status !== 'canceled' --> <!-- ngIf: thisReview.status === 'canceled' --> <span class="ng-binding"> (this review)</span> </h2> <!-- ngIf: thisReview.completed_at --><small class="text-muted ng-scope" ng-if="thisReview.completed_at"> <!-- ngIf: thisReview.status !== 'canceled' --><span ng-if="thisReview.status !== &#39;canceled&#39;" translate="" class="ng-scope">Reviewed</span><!-- end ngIf: thisReview.status !== 'canceled' --> <!-- ngIf: thisReview.status === 'canceled' --> <span> <span am-time-ago="thisReview.completed_at">5m ago</span></span> </small><!-- end ngIf: thisReview.completed_at --> <!-- ngIf: !thisReview.completed_at --> <div class="text-uppercase submission-notes-header ng-scope" translate="">student notes</div> <div class="submission-notes ng-isolate-scope" marked="thisReview.notes || &#39;_None provided_&#39;"><p>Hi Reviewer,<br>The report is in machine-learning/finding_donors/reportV2.html<br>The jupyter notebook is in machine-learning/finding_donors/finding_donors.ipynb<br>Following the first reviewer, the changes are:<br>1 "Percentage of individuals making more than $50,000: 24.78%", corrected the percentage.<br>2 Question 4 - Describing the Model in Layman's Terms<br>3 Question 6 - Feature Relevance Observation</p>
<p>Cheers,<br>Shun</p>
</div> <!-- ngIf: filteredReviews.length > 1 --><hr ng-if="filteredReviews.length &gt; 1" class="ng-scope"><!-- end ngIf: filteredReviews.length > 1 --> <!-- ngRepeat: review in filteredReviews --><!-- ngIf: filteredReviews.length > 1 --><div ng-if="filteredReviews.length &gt; 1" ng-repeat="review in filteredReviews" class="ng-scope"> <div class="row row-gap-small"> <div class="col-xs-12"> <!-- ngIf: review.status !== 'canceled' --><span ng-if="review.status !== &#39;canceled&#39;" class="ng-scope"> <!-- ngIf: !(thisReview && thisReview.id === review.id) --> <!-- ngIf: thisReview && thisReview.id === review.id --><span class="review-list-name ng-binding ng-scope" ng-if="thisReview &amp;&amp; thisReview.id === review.id"> This review <!-- ngIf: review.previous_submission_id --> </span><!-- end ngIf: thisReview && thisReview.id === review.id --> </span><!-- end ngIf: review.status !== 'canceled' --> <!-- ngIf: review.status === 'canceled' --> </div> </div> <div class="row"> <!-- ngIf: review.completed_at --><div ng-if="review.completed_at" class="col-xs-12 text-muted ng-scope"> <small> <!-- ngIf: review.status !== 'canceled' --><span ng-if="review.status !== &#39;canceled&#39;" translate="" class="ng-scope">Reviewed</span><!-- end ngIf: review.status !== 'canceled' --> <!-- ngIf: review.status === 'canceled' --> <span> <span am-time-ago="review.completed_at">5m ago</span></span> </small> </div><!-- end ngIf: review.completed_at --> <!-- ngIf: !review.completed_at --> </div> </div><!-- end ngIf: filteredReviews.length > 1 --><!-- end ngRepeat: review in filteredReviews --><!-- ngIf: filteredReviews.length > 1 --><div ng-if="filteredReviews.length &gt; 1" ng-repeat="review in filteredReviews" class="ng-scope"> <div class="row row-gap-small"> <div class="col-xs-12"> <!-- ngIf: review.status !== 'canceled' --><span ng-if="review.status !== &#39;canceled&#39;" class="ng-scope"> <!-- ngIf: !(thisReview && thisReview.id === review.id) --><a class="review-list-name ng-binding ng-scope" ng-if="!(thisReview &amp;&amp; thisReview.id === review.id)" ui-sref="reviews-show({submissionId: review.id, audit: null})" target="_blank" href="https://review.udacity.com/#!/reviews/622246"> Review #2 <!-- ngIf: review.previous_submission_id --> </a><!-- end ngIf: !(thisReview && thisReview.id === review.id) --> <!-- ngIf: thisReview && thisReview.id === review.id --> </span><!-- end ngIf: review.status !== 'canceled' --> <!-- ngIf: review.status === 'canceled' --> </div> </div> <div class="row"> <!-- ngIf: review.completed_at --><div ng-if="review.completed_at" class="col-xs-12 text-muted ng-scope"> <small> <!-- ngIf: review.status !== 'canceled' --><span ng-if="review.status !== &#39;canceled&#39;" translate="" class="ng-scope">Reviewed</span><!-- end ngIf: review.status !== 'canceled' --> <!-- ngIf: review.status === 'canceled' --> <span> <span am-time-ago="review.completed_at">2h ago</span></span> </small> </div><!-- end ngIf: review.completed_at --> <!-- ngIf: !review.completed_at --> </div> </div><!-- end ngIf: filteredReviews.length > 1 --><!-- end ngRepeat: review in filteredReviews --><!-- ngIf: filteredReviews.length > 1 --><div ng-if="filteredReviews.length &gt; 1" ng-repeat="review in filteredReviews" class="ng-scope"> <div class="row row-gap-small"> <div class="col-xs-12"> <!-- ngIf: review.status !== 'canceled' --><span ng-if="review.status !== &#39;canceled&#39;" class="ng-scope"> <!-- ngIf: !(thisReview && thisReview.id === review.id) --><a class="review-list-name ng-binding ng-scope" ng-if="!(thisReview &amp;&amp; thisReview.id === review.id)" ui-sref="reviews-show({submissionId: review.id, audit: null})" target="_blank" href="https://review.udacity.com/#!/reviews/613024"> Review #1 <!-- ngIf: review.previous_submission_id --> </a><!-- end ngIf: !(thisReview && thisReview.id === review.id) --> <!-- ngIf: thisReview && thisReview.id === review.id --> </span><!-- end ngIf: review.status !== 'canceled' --> <!-- ngIf: review.status === 'canceled' --> </div> </div> <div class="row"> <!-- ngIf: review.completed_at --><div ng-if="review.completed_at" class="col-xs-12 text-muted ng-scope"> <small> <!-- ngIf: review.status !== 'canceled' --><span ng-if="review.status !== &#39;canceled&#39;" translate="" class="ng-scope">Reviewed</span><!-- end ngIf: review.status !== 'canceled' --> <!-- ngIf: review.status === 'canceled' --> <span> <span am-time-ago="review.completed_at">3 days ago</span></span> </small> </div><!-- end ngIf: review.completed_at --> <!-- ngIf: !review.completed_at --> </div> </div><!-- end ngIf: filteredReviews.length > 1 --><!-- end ngRepeat: review in filteredReviews --> <div class="row row-gap-large"></div> </div><!-- end ngIf: pastReviews !== undefined --> </section> <section class="code-section ng-hide" ng-show="isCurrentTab(&#39;code&#39;)" style=""> <!-- ngIf: files && currentRubric --><div code-review="" ng-if="files &amp;&amp; currentRubric" files="files" rubric="currentRubric" allow-comments="false" class="ng-scope ng-isolate-scope"><div ng-show="allowComments" class="ng-hide" style=""> <input type="text" class="form-control ng-pristine ng-untouched ng-valid ng-empty" ng-model="filterPattern" placeholder="File filter (e.g. &quot;readme.md&quot;, &quot;.css&quot;, &quot;src/lib/*.js&quot;)"> <div class="row row-gap-small"></div> </div> <!-- ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">titanic_survival_exploration/visuals.py</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">titanic_survival_exploration/titanic_survival_exploration.html</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">titanic_survival_exploration/project_description.md</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">titanic_survival_exploration/README.md</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">student_intervention/project_description.md</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">student_intervention/README.md</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">smartcab/visuals.py</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-bottom" style=""> </span> </small> <strong class="ng-binding">smartcab/smartcab/simulator.py</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --><div class="code-section-item-body ng-scope" ng-if="currentFileIndex === $index"> <div mirror="" file="file" allow-comments="allowComments" class="ng-isolate-scope"><div ng-show="isLoading" class="loading ng-hide" style=""> </div> <div class="code-mirror-holder" ui-codemirror="{ onLoad: codeMirrorLoaded }" ui-codemirror-opts="generateEditorOptions(file)" ng-hide="isLoading" style=""><div class="CodeMirror cm-s-mbo"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 4px; left: 48px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" style="position: absolute; padding: 0px; width: 1000px; height: 1em; outline: none;" tabindex="0"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true" style="right: 0px; left: 44px; display: block;"><div style="height: 100%; min-height: 1px; width: 2788px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true" style="height: 15px; width: 15px;"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 44px; margin-bottom: -15px; border-right-width: 15px; min-width: 2787.66px; min-height: 7432px; padding-right: 0px; padding-bottom: 15px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 4px; top: 0px; height: 16px;">&nbsp;</div></div><div class="CodeMirror-code"><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">1</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">###########################################</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">2</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment"># Suppress matplotlib user warnings</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">3</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment"># Necessary for newer version of matplotlib</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">4</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">warnings</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">5</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-variable">warnings</span>.<span class="cm-variable">filterwarnings</span>(<span class="cm-string">"ignore"</span>, <span class="cm-variable">category</span> = <span class="cm-variable">UserWarning</span>, <span class="cm-variable">module</span> = <span class="cm-string">"matplotlib"</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">6</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-comment">###########################################</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">7</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">8</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">os</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">9</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">time</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">10</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">random</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">11</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">importlib</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">12</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">csv</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">13</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">14</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-keyword">class</span> <span class="cm-def">Simulator</span>(<span class="cm-builtin">object</span>):</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">15</div></div><pre class=""><span style="padding-right: 0.1px;">    <span class="cm-string">"""Simulates agents in a dynamic smartcab environment.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">16</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">17</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-string">    Uses PyGame to display GUI, if available.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">18</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-string">    """</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">19</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">20</div></div><pre class=""><span style="padding-right: 0.1px;">    <span class="cm-variable">colors</span> = {</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">21</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-string">'black'</span>   : (  <span class="cm-number">0</span>,   <span class="cm-number">0</span>,   <span class="cm-number">0</span>),</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">22</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-string">'white'</span>   : (<span class="cm-number">255</span>, <span class="cm-number">255</span>, <span class="cm-number">255</span>),</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">23</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-string">'red'</span>     : (<span class="cm-number">255</span>,   <span class="cm-number">0</span>,   <span class="cm-number">0</span>),</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">24</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-string">'green'</span>   : (  <span class="cm-number">0</span>, <span class="cm-number">255</span>,   <span class="cm-number">0</span>),</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">25</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-string">'dgreen'</span>  : (  <span class="cm-number">0</span>, <span class="cm-number">228</span>,   <span class="cm-number">0</span>),</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">26</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-string">'blue'</span>    : (  <span class="cm-number">0</span>,   <span class="cm-number">0</span>, <span class="cm-number">255</span>),</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">27</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-string">'cyan'</span>    : (  <span class="cm-number">0</span>, <span class="cm-number">200</span>, <span class="cm-number">200</span>),</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">28</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-string">'magenta'</span> : (<span class="cm-number">200</span>,   <span class="cm-number">0</span>, <span class="cm-number">200</span>),</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">29</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-string">'yellow'</span>  : (<span class="cm-number">255</span>, <span class="cm-number">255</span>,   <span class="cm-number">0</span>),</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">30</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-string">'mustard'</span> : (<span class="cm-number">200</span>, <span class="cm-number">200</span>,   <span class="cm-number">0</span>),</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">31</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-string">'orange'</span>  : (<span class="cm-number">255</span>, <span class="cm-number">128</span>,   <span class="cm-number">0</span>),</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">32</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-string">'maroon'</span>  : (<span class="cm-number">200</span>,   <span class="cm-number">0</span>,   <span class="cm-number">0</span>),</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">33</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-string">'crimson'</span> : (<span class="cm-number">128</span>,   <span class="cm-number">0</span>,   <span class="cm-number">0</span>),</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">34</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-string">'gray'</span>    : (<span class="cm-number">155</span>, <span class="cm-number">155</span>, <span class="cm-number">155</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">35</div></div><pre class=""><span style="padding-right: 0.1px;">    }</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">36</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">37</div></div><pre class=""><span style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">__init__</span>(<span class="cm-variable-2">self</span>, <span class="cm-variable">env</span>, <span class="cm-variable">size</span>=<span class="cm-builtin">None</span>, <span class="cm-variable">update_delay</span>=<span class="cm-number">2.0</span>, <span class="cm-variable">display</span>=<span class="cm-builtin">True</span>, <span class="cm-variable">log_metrics</span>=<span class="cm-builtin">False</span>, <span class="cm-variable">optimized</span>=<span class="cm-builtin">False</span>):</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">38</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span> = <span class="cm-variable">env</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">39</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">size</span> = <span class="cm-variable">size</span> <span class="cm-keyword">if</span> <span class="cm-variable">size</span> <span class="cm-operator">is</span> <span class="cm-operator">not</span> <span class="cm-builtin">None</span> <span class="cm-keyword">else</span> ((<span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">grid_size</span>[<span class="cm-number">0</span>] <span class="cm-operator">+</span> <span class="cm-number">1</span>) <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span>, (<span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">grid_size</span>[<span class="cm-number">1</span>] <span class="cm-operator">+</span> <span class="cm-number">2</span>) <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">40</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">width</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">height</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">size</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">41</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span> = <span class="cm-number">44</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">42</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">43</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'gray'</span>]</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">44</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">road_color</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'black'</span>]</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">45</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">line_color</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'mustard'</span>]</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">46</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">boundary</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'black'</span>]</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">47</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">stop_color</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'crimson'</span>]</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">48</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">49</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">quit</span> = <span class="cm-builtin">False</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">50</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">start_time</span> = <span class="cm-builtin">None</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">51</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">current_time</span> = <span class="cm-number">0.0</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">52</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">last_updated</span> = <span class="cm-number">0.0</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">53</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">update_delay</span> = <span class="cm-variable">update_delay</span>  <span class="cm-comment"># duration between each step (in seconds)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">54</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">55</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">display</span> = <span class="cm-variable">display</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">56</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-keyword">if</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">display</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">57</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">try</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">58</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span> = <span class="cm-variable">importlib</span>.<span class="cm-variable">import_module</span>(<span class="cm-string">'pygame'</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">59</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">init</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">60</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">display</span>.<span class="cm-variable">set_mode</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">size</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">61</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">_logo</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">transform</span>.<span class="cm-variable">smoothscale</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">image</span>.<span class="cm-variable">load</span>(<span class="cm-variable">os</span>.<span class="cm-variable">path</span>.<span class="cm-variable">join</span>(<span class="cm-string">"images"</span>, <span class="cm-string">"logo.png"</span>)), (<span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">62</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">63</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">_ew</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">transform</span>.<span class="cm-variable">smoothscale</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">image</span>.<span class="cm-variable">load</span>(<span class="cm-variable">os</span>.<span class="cm-variable">path</span>.<span class="cm-variable">join</span>(<span class="cm-string">"images"</span>, <span class="cm-string">"east-west.png"</span>)), (<span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">64</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">_ns</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">transform</span>.<span class="cm-variable">smoothscale</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">image</span>.<span class="cm-variable">load</span>(<span class="cm-variable">os</span>.<span class="cm-variable">path</span>.<span class="cm-variable">join</span>(<span class="cm-string">"images"</span>, <span class="cm-string">"north-south.png"</span>)), (<span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">65</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">66</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">frame_delay</span> = <span class="cm-builtin">max</span>(<span class="cm-number">1</span>, <span class="cm-builtin">int</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">update_delay</span> <span class="cm-operator">*</span> <span class="cm-number">1000</span>))  <span class="cm-comment"># delay between GUI frames in ms (min: 1)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">67</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">agent_sprite_size</span> = (<span class="cm-number">32</span>, <span class="cm-number">32</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">68</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">primary_agent_sprite_size</span> = (<span class="cm-number">42</span>, <span class="cm-number">42</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">69</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">agent_circle_radius</span> = <span class="cm-number">20</span>  <span class="cm-comment"># radius of circle, when using simple representation</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">70</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">for</span> <span class="cm-variable">agent</span> <span class="cm-keyword">in</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">agent_states</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">71</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-keyword">if</span> <span class="cm-variable">agent</span>.<span class="cm-variable">color</span> <span class="cm-operator">==</span> <span class="cm-string">'white'</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">72</div></div><pre class=""><span style="padding-right: 0.1px;">                        <span class="cm-variable">agent</span>.<span class="cm-variable">_sprite</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">transform</span>.<span class="cm-variable">smoothscale</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">image</span>.<span class="cm-variable">load</span>(<span class="cm-variable">os</span>.<span class="cm-variable">path</span>.<span class="cm-variable">join</span>(<span class="cm-string">"images"</span>, <span class="cm-string">"car-{}.png"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">agent</span>.<span class="cm-variable">color</span>))), <span class="cm-variable-2">self</span>.<span class="cm-variable">primary_agent_sprite_size</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">73</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-keyword">else</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">74</div></div><pre class=""><span style="padding-right: 0.1px;">                        <span class="cm-variable">agent</span>.<span class="cm-variable">_sprite</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">transform</span>.<span class="cm-variable">smoothscale</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">image</span>.<span class="cm-variable">load</span>(<span class="cm-variable">os</span>.<span class="cm-variable">path</span>.<span class="cm-variable">join</span>(<span class="cm-string">"images"</span>, <span class="cm-string">"car-{}.png"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">agent</span>.<span class="cm-variable">color</span>))), <span class="cm-variable-2">self</span>.<span class="cm-variable">agent_sprite_size</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">75</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable">agent</span>.<span class="cm-variable">_sprite_size</span> = (<span class="cm-variable">agent</span>.<span class="cm-variable">_sprite</span>.<span class="cm-variable">get_width</span>(), <span class="cm-variable">agent</span>.<span class="cm-variable">_sprite</span>.<span class="cm-variable">get_height</span>())</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">76</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">77</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">font</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">font</span>.<span class="cm-variable">Font</span>(<span class="cm-builtin">None</span>, <span class="cm-number">20</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">78</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">paused</span> = <span class="cm-builtin">False</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">79</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">except</span> <span class="cm-variable">ImportError</span> <span class="cm-keyword">as</span> <span class="cm-variable">e</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">80</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">display</span> = <span class="cm-builtin">False</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">81</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">print</span> <span class="cm-string">"Simulator.__init__(): Unable to import pygame; display disabled.\n{}: {}"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">e</span>.<span class="cm-variable">__class__</span>.<span class="cm-variable">__name__</span>, <span class="cm-variable">e</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">82</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">except</span> <span class="cm-variable">Exception</span> <span class="cm-keyword">as</span> <span class="cm-variable">e</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">83</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">display</span> = <span class="cm-builtin">False</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">84</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">print</span> <span class="cm-string">"Simulator.__init__(): Error initializing GUI objects; display disabled.\n{}: {}"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">e</span>.<span class="cm-variable">__class__</span>.<span class="cm-variable">__name__</span>, <span class="cm-variable">e</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">85</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">86</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-comment"># Setup metrics to report</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">87</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">log_metrics</span> = <span class="cm-variable">log_metrics</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">88</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">optimized</span> = <span class="cm-variable">optimized</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">89</div></div><pre class=""><span style="padding-right: 0.1px;">        </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">90</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-keyword">if</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">log_metrics</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">91</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable">a</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">primary_agent</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">92</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">93</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-comment"># Set log files</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">94</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">if</span> <span class="cm-variable">a</span>.<span class="cm-variable">learning</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">95</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">if</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">optimized</span>: <span class="cm-comment"># Whether the user is optimizing the parameters and decay functions</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">96</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">log_filename</span> = <span class="cm-variable">os</span>.<span class="cm-variable">path</span>.<span class="cm-variable">join</span>(<span class="cm-string">"logs"</span>, <span class="cm-string">"sim_improved-learning.csv"</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">97</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">table_filename</span> = <span class="cm-variable">os</span>.<span class="cm-variable">path</span>.<span class="cm-variable">join</span>(<span class="cm-string">"logs"</span>,<span class="cm-string">"sim_improved-learning.txt"</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">98</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">else</span>: </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">99</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">log_filename</span> = <span class="cm-variable">os</span>.<span class="cm-variable">path</span>.<span class="cm-variable">join</span>(<span class="cm-string">"logs"</span>, <span class="cm-string">"sim_default-learning.csv"</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">100</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">table_filename</span> = <span class="cm-variable">os</span>.<span class="cm-variable">path</span>.<span class="cm-variable">join</span>(<span class="cm-string">"logs"</span>,<span class="cm-string">"sim_default-learning.txt"</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">101</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">102</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">table_file</span> = <span class="cm-builtin">open</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">table_filename</span>, <span class="cm-string">'wb'</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">103</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">else</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">104</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">log_filename</span> = <span class="cm-variable">os</span>.<span class="cm-variable">path</span>.<span class="cm-variable">join</span>(<span class="cm-string">"logs"</span>, <span class="cm-string">"sim_no-learning.csv"</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">105</div></div><pre class=""><span style="padding-right: 0.1px;">            </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">106</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable-2">self</span>.<span class="cm-variable">log_fields</span> = [<span class="cm-string">'trial'</span>, <span class="cm-string">'testing'</span>, <span class="cm-string">'parameters'</span>, <span class="cm-string">'initial_deadline'</span>, <span class="cm-string">'final_deadline'</span>, <span class="cm-string">'net_reward'</span>, <span class="cm-string">'actions'</span>, <span class="cm-string">'success'</span>]</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">107</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable-2">self</span>.<span class="cm-variable">log_file</span> = <span class="cm-builtin">open</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">log_filename</span>, <span class="cm-string">'wb'</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">108</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable-2">self</span>.<span class="cm-variable">log_writer</span> = <span class="cm-variable">csv</span>.<span class="cm-variable">DictWriter</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">log_file</span>, <span class="cm-variable">fieldnames</span>=<span class="cm-variable-2">self</span>.<span class="cm-variable">log_fields</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">109</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable-2">self</span>.<span class="cm-variable">log_writer</span>.<span class="cm-variable">writeheader</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">110</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">111</div></div><pre class=""><span style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">run</span>(<span class="cm-variable-2">self</span>, <span class="cm-variable">tolerance</span>=<span class="cm-number">0.05</span>, <span class="cm-variable">n_test</span>=<span class="cm-number">0</span>):</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">112</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-string">""" Run a simulation of the environment. </span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">113</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">114</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-string">        'tolerance' is the minimum epsilon necessary to begin testing (if enabled)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">115</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-string">        'n_test' is the number of testing trials simulated</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">116</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">117</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-string">        Note that the minimum number of training trials is always 20. """</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">118</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">119</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">quit</span> = <span class="cm-builtin">False</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">120</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">121</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-comment"># Get the primary agent</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">122</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable">a</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">primary_agent</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">123</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">124</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable">total_trials</span> = <span class="cm-number">1</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">125</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable">testing</span> = <span class="cm-builtin">False</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">126</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable">trial</span> = <span class="cm-number">1</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">127</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">128</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-keyword">while</span> <span class="cm-builtin">True</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">129</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">130</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-comment"># Flip testing switch</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">131</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">if</span> <span class="cm-operator">not</span> <span class="cm-variable">testing</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">132</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">if</span> <span class="cm-variable">total_trials</span> <span class="cm-operator">&gt;</span> <span class="cm-number">20</span>: <span class="cm-comment"># Must complete minimum 20 training trials</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">133</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-keyword">if</span> <span class="cm-variable">a</span>.<span class="cm-variable">learning</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">134</div></div><pre class=""><span style="padding-right: 0.1px;">                        <span class="cm-keyword">if</span> <span class="cm-variable">a</span>.<span class="cm-variable">epsilon</span> <span class="cm-operator">&lt;</span> <span class="cm-variable">tolerance</span>: <span class="cm-comment"># assumes epsilon decays to 0</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">135</div></div><pre class=""><span style="padding-right: 0.1px;">                            <span class="cm-variable">testing</span> = <span class="cm-builtin">True</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">136</div></div><pre class=""><span style="padding-right: 0.1px;">                            <span class="cm-variable">trial</span> = <span class="cm-number">1</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">137</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-keyword">else</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">138</div></div><pre class=""><span style="padding-right: 0.1px;">                        <span class="cm-variable">testing</span> = <span class="cm-builtin">True</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">139</div></div><pre class=""><span style="padding-right: 0.1px;">                        <span class="cm-variable">trial</span> = <span class="cm-number">1</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">140</div></div><pre class=""><span style="padding-right: 0.1px;">                        </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">141</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-comment"># Break if we've reached the limit of testing trials</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">142</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">else</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">143</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">if</span> <span class="cm-variable">trial</span> <span class="cm-operator">&gt;</span> <span class="cm-variable">n_test</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">144</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-keyword">break</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">145</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">146</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-comment"># Pretty print to terminal</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">147</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">print</span> </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">148</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">print</span> <span class="cm-string">"/-------------------------"</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">149</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">if</span> <span class="cm-variable">testing</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">150</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">print</span> <span class="cm-string">"| Testing trial {}"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">trial</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">151</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">else</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">152</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">print</span> <span class="cm-string">"| Training trial {}"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">trial</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">153</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">154</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">print</span> <span class="cm-string">"\-------------------------"</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">155</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">print</span> </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">156</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">157</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">reset</span>(<span class="cm-variable">testing</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">158</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable-2">self</span>.<span class="cm-variable">current_time</span> = <span class="cm-number">0.0</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">159</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable-2">self</span>.<span class="cm-variable">last_updated</span> = <span class="cm-number">0.0</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">160</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable-2">self</span>.<span class="cm-variable">start_time</span> = <span class="cm-variable">time</span>.<span class="cm-variable">time</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">161</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">while</span> <span class="cm-builtin">True</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">162</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">try</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">163</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-comment"># Update current time</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">164</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">current_time</span> = <span class="cm-variable">time</span>.<span class="cm-variable">time</span>() <span class="cm-operator">-</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">start_time</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">165</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">166</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-comment"># Handle GUI events</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">167</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-keyword">if</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">display</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">168</div></div><pre class=""><span style="padding-right: 0.1px;">                        <span class="cm-keyword">for</span> <span class="cm-variable">event</span> <span class="cm-keyword">in</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">event</span>.<span class="cm-variable">get</span>():</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">169</div></div><pre class=""><span style="padding-right: 0.1px;">                            <span class="cm-keyword">if</span> <span class="cm-variable">event</span>.<span class="cm-builtin">type</span> <span class="cm-operator">==</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">QUIT</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">170</div></div><pre class=""><span style="padding-right: 0.1px;">                                <span class="cm-variable-2">self</span>.<span class="cm-variable">quit</span> = <span class="cm-builtin">True</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">171</div></div><pre class=""><span style="padding-right: 0.1px;">                            <span class="cm-keyword">elif</span> <span class="cm-variable">event</span>.<span class="cm-builtin">type</span> <span class="cm-operator">==</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">KEYDOWN</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">172</div></div><pre class=""><span style="padding-right: 0.1px;">                                <span class="cm-keyword">if</span> <span class="cm-variable">event</span>.<span class="cm-variable">key</span> <span class="cm-operator">==</span> <span class="cm-number">27</span>:  <span class="cm-comment"># Esc</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">173</div></div><pre class=""><span style="padding-right: 0.1px;">                                    <span class="cm-variable-2">self</span>.<span class="cm-variable">quit</span> = <span class="cm-builtin">True</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">174</div></div><pre class=""><span style="padding-right: 0.1px;">                                <span class="cm-keyword">elif</span> <span class="cm-variable">event</span>.<span class="cm-builtin">unicode</span> <span class="cm-operator">==</span> <span class="cm-string">u' '</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">175</div></div><pre class=""><span style="padding-right: 0.1px;">                                    <span class="cm-variable-2">self</span>.<span class="cm-variable">paused</span> = <span class="cm-builtin">True</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">176</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">177</div></div><pre class=""><span style="padding-right: 0.1px;">                        <span class="cm-keyword">if</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">paused</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">178</div></div><pre class=""><span style="padding-right: 0.1px;">                            <span class="cm-variable-2">self</span>.<span class="cm-variable">pause</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">179</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">180</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-comment"># Update environment</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">181</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-keyword">if</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">current_time</span> <span class="cm-operator">-</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">last_updated</span> <span class="cm-operator">&gt;=</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">update_delay</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">182</div></div><pre class=""><span style="padding-right: 0.1px;">                        <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">step</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">183</div></div><pre class=""><span style="padding-right: 0.1px;">                        <span class="cm-variable-2">self</span>.<span class="cm-variable">last_updated</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">current_time</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">184</div></div><pre class=""><span style="padding-right: 0.1px;">                    </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">185</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-comment"># Render text</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">186</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">render_text</span>(<span class="cm-variable">trial</span>, <span class="cm-variable">testing</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">187</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">188</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-comment"># Render GUI and sleep</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">189</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-keyword">if</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">display</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">190</div></div><pre class=""><span style="padding-right: 0.1px;">                        <span class="cm-variable-2">self</span>.<span class="cm-variable">render</span>(<span class="cm-variable">trial</span>, <span class="cm-variable">testing</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">191</div></div><pre class=""><span style="padding-right: 0.1px;">                        <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">time</span>.<span class="cm-variable">wait</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">frame_delay</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">192</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">193</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">except</span> <span class="cm-variable">KeyboardInterrupt</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">194</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">quit</span> = <span class="cm-builtin">True</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">195</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">finally</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">196</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-keyword">if</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">quit</span> <span class="cm-operator">or</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">done</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">197</div></div><pre class=""><span style="padding-right: 0.1px;">                        <span class="cm-keyword">break</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">198</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">199</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">if</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">quit</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">200</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">break</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">201</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">202</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-comment"># Collect metrics from trial</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">203</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">if</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">log_metrics</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">204</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">log_writer</span>.<span class="cm-variable">writerow</span>({</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">205</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-string">'trial'</span>: <span class="cm-variable">trial</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">206</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-string">'testing'</span>: <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">trial_data</span>[<span class="cm-string">'testing'</span>],</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">207</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-string">'parameters'</span>: <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">trial_data</span>[<span class="cm-string">'parameters'</span>],</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">208</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-string">'initial_deadline'</span>: <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">trial_data</span>[<span class="cm-string">'initial_deadline'</span>],</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">209</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-string">'final_deadline'</span>: <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">trial_data</span>[<span class="cm-string">'final_deadline'</span>],</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">210</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-string">'net_reward'</span>: <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">trial_data</span>[<span class="cm-string">'net_reward'</span>],</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">211</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-string">'actions'</span>: <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">trial_data</span>[<span class="cm-string">'actions'</span>],</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">212</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-string">'success'</span>: <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">trial_data</span>[<span class="cm-string">'success'</span>]</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">213</div></div><pre class=""><span style="padding-right: 0.1px;">                })</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">214</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">215</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-comment"># Trial finished</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">216</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">if</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">success</span> <span class="cm-operator">==</span> <span class="cm-builtin">True</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">217</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">print</span> <span class="cm-string">"\nTrial Completed!"</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">218</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">print</span> <span class="cm-string">"Agent reached the destination."</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">219</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">else</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">220</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">print</span> <span class="cm-string">"\nTrial Aborted!"</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">221</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">print</span> <span class="cm-string">"Agent did not reach the destination."</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">222</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">223</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-comment"># Increment</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">224</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable">total_trials</span> = <span class="cm-variable">total_trials</span> <span class="cm-operator">+</span> <span class="cm-number">1</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">225</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable">trial</span> = <span class="cm-variable">trial</span> <span class="cm-operator">+</span> <span class="cm-number">1</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">226</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">227</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-comment"># Clean up</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">228</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-keyword">if</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">log_metrics</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">229</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">230</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">if</span> <span class="cm-variable">a</span>.<span class="cm-variable">learning</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">231</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable">f</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">table_file</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">232</div></div><pre class=""><span style="padding-right: 0.1px;">                </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">233</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable">f</span>.<span class="cm-variable">write</span>(<span class="cm-string">"/-----------------------------------------\n"</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">234</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable">f</span>.<span class="cm-variable">write</span>(<span class="cm-string">"| State-action rewards from Q-Learning\n"</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">235</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable">f</span>.<span class="cm-variable">write</span>(<span class="cm-string">"\-----------------------------------------\n\n"</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">236</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">237</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">for</span> <span class="cm-variable">state</span> <span class="cm-keyword">in</span> <span class="cm-variable">a</span>.<span class="cm-variable">Q</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">238</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable">f</span>.<span class="cm-variable">write</span>(<span class="cm-string">"{}\n"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">state</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">239</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-keyword">for</span> <span class="cm-variable">action</span>, <span class="cm-variable">reward</span> <span class="cm-keyword">in</span> <span class="cm-variable">a</span>.<span class="cm-variable">Q</span>[<span class="cm-variable">state</span>].<span class="cm-variable">iteritems</span>():</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">240</div></div><pre class=""><span style="padding-right: 0.1px;">                        <span class="cm-variable">f</span>.<span class="cm-variable">write</span>(<span class="cm-string">" -- {} : {:.2f}\n"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">action</span>, <span class="cm-variable">reward</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">241</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable">f</span>.<span class="cm-variable">write</span>(<span class="cm-string">"\n"</span>)  </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">242</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">table_file</span>.<span class="cm-variable">close</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">243</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">244</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable-2">self</span>.<span class="cm-variable">log_file</span>.<span class="cm-variable">close</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">245</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">246</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-keyword">print</span> <span class="cm-string">"\nSimulation ended. . . "</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">247</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">248</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-comment"># Report final metrics</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">249</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-keyword">if</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">display</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">250</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">display</span>.<span class="cm-variable">quit</span>()  <span class="cm-comment"># shut down pygame</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">251</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">252</div></div><pre class=""><span style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">render_text</span>(<span class="cm-variable-2">self</span>, <span class="cm-variable">trial</span>, <span class="cm-variable">testing</span>=<span class="cm-builtin">False</span>):</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">253</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-string">""" This is the non-GUI render display of the simulation. </span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">254</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-string">            Simulated trial data will be rendered in the terminal/command prompt. """</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">255</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">256</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable">status</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">step_data</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">257</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-keyword">if</span> <span class="cm-variable">status</span> <span class="cm-operator">and</span> <span class="cm-variable">status</span>[<span class="cm-string">'waypoint'</span>] <span class="cm-operator">is</span> <span class="cm-operator">not</span> <span class="cm-builtin">None</span>: <span class="cm-comment"># Continuing the trial</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">258</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">259</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-comment"># Previous State</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">260</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">if</span> <span class="cm-variable">status</span>[<span class="cm-string">'state'</span>]:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">261</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">print</span> <span class="cm-string">"Agent previous state: {}"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">status</span>[<span class="cm-string">'state'</span>])</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">262</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">else</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">263</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">print</span> <span class="cm-string">"!! Agent state not been updated!"</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">264</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">265</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-comment"># Result</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">266</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">if</span> <span class="cm-variable">status</span>[<span class="cm-string">'violation'</span>] <span class="cm-operator">==</span> <span class="cm-number">0</span>: <span class="cm-comment"># Legal</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">267</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">if</span> <span class="cm-variable">status</span>[<span class="cm-string">'waypoint'</span>] <span class="cm-operator">==</span> <span class="cm-variable">status</span>[<span class="cm-string">'action'</span>]: <span class="cm-comment"># Followed waypoint</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">268</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-keyword">print</span> <span class="cm-string">"Agent followed the waypoint {}. (rewarded {:.2f})"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">status</span>[<span class="cm-string">'action'</span>], <span class="cm-variable">status</span>[<span class="cm-string">'reward'</span>])</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">269</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">elif</span> <span class="cm-variable">status</span>[<span class="cm-string">'action'</span>] <span class="cm-operator">==</span> <span class="cm-builtin">None</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">270</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-keyword">if</span> <span class="cm-variable">status</span>[<span class="cm-string">'light'</span>] <span class="cm-operator">==</span> <span class="cm-string">'red'</span>: <span class="cm-comment"># Stuck at red light</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">271</div></div><pre class=""><span style="padding-right: 0.1px;">                        <span class="cm-keyword">print</span> <span class="cm-string">"Agent properly idled at a red light. (rewarded {:.2f})"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">status</span>[<span class="cm-string">'reward'</span>])</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">272</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-keyword">else</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">273</div></div><pre class=""><span style="padding-right: 0.1px;">                        <span class="cm-keyword">print</span> <span class="cm-string">"Agent idled at a green light with oncoming traffic. (rewarded {:.2f})"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">status</span>[<span class="cm-string">'reward'</span>])</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">274</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">else</span>: <span class="cm-comment"># Did not follow waypoint</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">275</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-keyword">print</span> <span class="cm-string">"Agent drove {} instead of {}. (rewarded {:.2f})"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">status</span>[<span class="cm-string">'action'</span>], <span class="cm-variable">status</span>[<span class="cm-string">'waypoint'</span>], <span class="cm-variable">status</span>[<span class="cm-string">'reward'</span>])</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">276</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">else</span>: <span class="cm-comment"># Illegal</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">277</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">if</span> <span class="cm-variable">status</span>[<span class="cm-string">'violation'</span>] <span class="cm-operator">==</span> <span class="cm-number">1</span>: <span class="cm-comment"># Minor violation</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">278</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-keyword">print</span> <span class="cm-string">"Agent idled at a green light with no oncoming traffic. (rewarded {:.2f})"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">status</span>[<span class="cm-string">'reward'</span>])</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">279</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">elif</span> <span class="cm-variable">status</span>[<span class="cm-string">'violation'</span>] <span class="cm-operator">==</span> <span class="cm-number">2</span>: <span class="cm-comment"># Major violation</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">280</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-keyword">print</span> <span class="cm-string">"Agent attempted driving {} through a red light. (rewarded {:.2f})"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">status</span>[<span class="cm-string">'action'</span>], <span class="cm-variable">status</span>[<span class="cm-string">'reward'</span>])</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">281</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">elif</span> <span class="cm-variable">status</span>[<span class="cm-string">'violation'</span>] <span class="cm-operator">==</span> <span class="cm-number">3</span>: <span class="cm-comment"># Minor accident</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">282</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-keyword">print</span> <span class="cm-string">"Agent attempted driving {} through traffic and cause a minor accident. (rewarded {:.2f})"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">status</span>[<span class="cm-string">'action'</span>], <span class="cm-variable">status</span>[<span class="cm-string">'reward'</span>])</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">283</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">elif</span> <span class="cm-variable">status</span>[<span class="cm-string">'violation'</span>] <span class="cm-operator">==</span> <span class="cm-number">4</span>: <span class="cm-comment"># Major accident</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">284</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-keyword">print</span> <span class="cm-string">"Agent attempted driving {} through a red light with traffic and cause a major accident. (rewarded {:.2f})"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">status</span>[<span class="cm-string">'action'</span>], <span class="cm-variable">status</span>[<span class="cm-string">'reward'</span>])</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">285</div></div><pre class=""><span style="padding-right: 0.1px;">           </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">286</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-null cm-error">            </span><span class="cm-comment"># Time Remaining</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">287</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">if</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">enforce_deadline</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">288</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable">time</span> = (<span class="cm-variable">status</span>[<span class="cm-string">'deadline'</span>] <span class="cm-operator">-</span> <span class="cm-number">1</span>) <span class="cm-operator">*</span> <span class="cm-number">100.0</span> <span class="cm-operator">/</span> (<span class="cm-variable">status</span>[<span class="cm-string">'t'</span>] <span class="cm-operator">+</span> <span class="cm-variable">status</span>[<span class="cm-string">'deadline'</span>])</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">289</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">print</span> <span class="cm-string">"{:.0f}% of time remaining to reach destination."</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">time</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">290</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">else</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">291</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">print</span> <span class="cm-string">"Agent not enforced to meet deadline."</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">292</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">293</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-comment"># Starting new trial</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">294</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-keyword">else</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">295</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable">a</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">primary_agent</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">296</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">print</span> <span class="cm-string">"Simulating trial. . . "</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">297</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">if</span> <span class="cm-variable">a</span>.<span class="cm-variable">learning</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">298</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">print</span> <span class="cm-string">"epsilon = {:.4f}; alpha = {:.4f}"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">a</span>.<span class="cm-variable">epsilon</span>, <span class="cm-variable">a</span>.<span class="cm-variable">alpha</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">299</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">else</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">300</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">print</span> <span class="cm-string">"Agent not set to learn."</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">301</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">302</div></div><pre class=""><span style="padding-right: 0.1px;">                </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">303</div></div><pre class=""><span style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">render</span>(<span class="cm-variable-2">self</span>, <span class="cm-variable">trial</span>, <span class="cm-variable">testing</span>=<span class="cm-builtin">False</span>):</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">304</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-string">""" This is the GUI render display of the simulation. </span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">305</div></div><pre class=""><span style="padding-right: 0.1px;"><span class="cm-string">            Supplementary trial data can be found from render_text. """</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">306</div></div><pre class=""><span style="padding-right: 0.1px;">        </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">307</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-comment"># Reset the screen.</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">308</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">fill</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">309</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">310</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-comment"># Draw elements</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">311</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-comment"># * Static elements</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">312</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">313</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-comment"># Boundary</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">314</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">draw</span>.<span class="cm-variable">rect</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">boundary</span>, ((<span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">bounds</span>[<span class="cm-number">0</span>] <span class="cm-operator">-</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">hang</span>)<span class="cm-operator">*</span><span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span>, (<span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">bounds</span>[<span class="cm-number">1</span>]<span class="cm-operator">-</span><span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">hang</span>)<span class="cm-operator">*</span><span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span>, (<span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">bounds</span>[<span class="cm-number">2</span>] <span class="cm-operator">+</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">hang</span><span class="cm-operator">/</span><span class="cm-number">3</span>)<span class="cm-operator">*</span><span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span>, (<span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">bounds</span>[<span class="cm-number">3</span>] <span class="cm-operator">-</span> <span class="cm-number">1</span> <span class="cm-operator">+</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">hang</span><span class="cm-operator">/</span><span class="cm-number">3</span>)<span class="cm-operator">*</span><span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span>), <span class="cm-number">4</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">315</div></div><pre class=""><span style="padding-right: 0.1px;">        </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">316</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-keyword">for</span> <span class="cm-variable">road</span> <span class="cm-keyword">in</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">roads</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">317</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-comment"># Road</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">318</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">draw</span>.<span class="cm-variable">line</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">road_color</span>, (<span class="cm-variable">road</span>[<span class="cm-number">0</span>][<span class="cm-number">0</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span>, <span class="cm-variable">road</span>[<span class="cm-number">0</span>][<span class="cm-number">1</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span>), (<span class="cm-variable">road</span>[<span class="cm-number">1</span>][<span class="cm-number">0</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span>, <span class="cm-variable">road</span>[<span class="cm-number">1</span>][<span class="cm-number">1</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span>), <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">319</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-comment"># Center line</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">320</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">draw</span>.<span class="cm-variable">line</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">line_color</span>, (<span class="cm-variable">road</span>[<span class="cm-number">0</span>][<span class="cm-number">0</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span>, <span class="cm-variable">road</span>[<span class="cm-number">0</span>][<span class="cm-number">1</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span>), (<span class="cm-variable">road</span>[<span class="cm-number">1</span>][<span class="cm-number">0</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span>, <span class="cm-variable">road</span>[<span class="cm-number">1</span>][<span class="cm-number">1</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span>), <span class="cm-number">2</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">321</div></div><pre class=""><span style="padding-right: 0.1px;">        </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">322</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-keyword">for</span> <span class="cm-variable">intersection</span>, <span class="cm-variable">traffic_light</span> <span class="cm-keyword">in</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">intersections</span>.<span class="cm-variable">iteritems</span>():</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">323</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">draw</span>.<span class="cm-variable">circle</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">road_color</span>, (<span class="cm-variable">intersection</span>[<span class="cm-number">0</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span>, <span class="cm-variable">intersection</span>[<span class="cm-number">1</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span>), <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">324</div></div><pre class=""><span style="padding-right: 0.1px;">            </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">325</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">if</span> <span class="cm-variable">traffic_light</span>.<span class="cm-variable">state</span>: <span class="cm-comment"># North-South is open</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">326</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">_ns</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">327</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">rect</span>.<span class="cm-variable">Rect</span>(<span class="cm-variable">intersection</span>[<span class="cm-number">0</span>]<span class="cm-operator">*</span><span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">-</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>, <span class="cm-variable">intersection</span>[<span class="cm-number">1</span>]<span class="cm-operator">*</span><span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">-</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>, <span class="cm-variable">intersection</span>[<span class="cm-number">0</span>]<span class="cm-operator">*</span><span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">+</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span>, <span class="cm-variable">intersection</span>[<span class="cm-number">1</span>]<span class="cm-operator">*</span><span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">+</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">328</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">draw</span>.<span class="cm-variable">line</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">stop_color</span>, (<span class="cm-variable">intersection</span>[<span class="cm-number">0</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">-</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>, <span class="cm-variable">intersection</span>[<span class="cm-number">1</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">-</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>), (<span class="cm-variable">intersection</span>[<span class="cm-number">0</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">-</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>, <span class="cm-variable">intersection</span>[<span class="cm-number">1</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">+</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>), <span class="cm-number">2</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">329</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">draw</span>.<span class="cm-variable">line</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">stop_color</span>, (<span class="cm-variable">intersection</span>[<span class="cm-number">0</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">+</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>, <span class="cm-variable">intersection</span>[<span class="cm-number">1</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">-</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>), (<span class="cm-variable">intersection</span>[<span class="cm-number">0</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">+</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>, <span class="cm-variable">intersection</span>[<span class="cm-number">1</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">+</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>), <span class="cm-number">2</span>)            </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">330</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">else</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">331</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">_ew</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">332</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">rect</span>.<span class="cm-variable">Rect</span>(<span class="cm-variable">intersection</span>[<span class="cm-number">0</span>]<span class="cm-operator">*</span><span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">-</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>, <span class="cm-variable">intersection</span>[<span class="cm-number">1</span>]<span class="cm-operator">*</span><span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">-</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>, <span class="cm-variable">intersection</span>[<span class="cm-number">0</span>]<span class="cm-operator">*</span><span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">+</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span>, <span class="cm-variable">intersection</span>[<span class="cm-number">1</span>]<span class="cm-operator">*</span><span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">+</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">333</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">draw</span>.<span class="cm-variable">line</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">stop_color</span>, (<span class="cm-variable">intersection</span>[<span class="cm-number">0</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">-</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>, <span class="cm-variable">intersection</span>[<span class="cm-number">1</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">-</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>), (<span class="cm-variable">intersection</span>[<span class="cm-number">0</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">+</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>, <span class="cm-variable">intersection</span>[<span class="cm-number">1</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">-</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>), <span class="cm-number">2</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">334</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">draw</span>.<span class="cm-variable">line</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">stop_color</span>, (<span class="cm-variable">intersection</span>[<span class="cm-number">0</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">+</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>, <span class="cm-variable">intersection</span>[<span class="cm-number">1</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">+</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>), (<span class="cm-variable">intersection</span>[<span class="cm-number">0</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">-</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>, <span class="cm-variable">intersection</span>[<span class="cm-number">1</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">+</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span> <span class="cm-operator">+</span> <span class="cm-number">1</span>), <span class="cm-number">2</span>)            </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">335</div></div><pre class=""><span style="padding-right: 0.1px;">            </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">336</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-comment"># * Dynamic elements</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">337</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">font</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">font</span>.<span class="cm-variable">Font</span>(<span class="cm-builtin">None</span>, <span class="cm-number">20</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">338</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-keyword">for</span> <span class="cm-variable">agent</span>, <span class="cm-variable">state</span> <span class="cm-keyword">in</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">agent_states</span>.<span class="cm-variable">iteritems</span>():</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">339</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-comment"># Compute precise agent location here (back from the intersection some)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">340</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable">agent_offset</span> = (<span class="cm-number">2</span> <span class="cm-operator">*</span> <span class="cm-variable">state</span>[<span class="cm-string">'heading'</span>][<span class="cm-number">0</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">agent_circle_radius</span> <span class="cm-operator">+</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">agent_circle_radius</span> <span class="cm-operator">*</span> <span class="cm-variable">state</span>[<span class="cm-string">'heading'</span>][<span class="cm-number">1</span>] <span class="cm-operator">*</span> <span class="cm-number">0.5</span>, <span class="cm-error">\</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">341</div></div><pre class=""><span style="padding-right: 0.1px;">                            <span class="cm-number">2</span> <span class="cm-operator">*</span> <span class="cm-variable">state</span>[<span class="cm-string">'heading'</span>][<span class="cm-number">1</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">agent_circle_radius</span> <span class="cm-operator">-</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">agent_circle_radius</span> <span class="cm-operator">*</span> <span class="cm-variable">state</span>[<span class="cm-string">'heading'</span>][<span class="cm-number">0</span>] <span class="cm-operator">*</span> <span class="cm-number">0.5</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">342</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">343</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">344</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable">agent_pos</span> = (<span class="cm-variable">state</span>[<span class="cm-string">'location'</span>][<span class="cm-number">0</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">-</span> <span class="cm-variable">agent_offset</span>[<span class="cm-number">0</span>], <span class="cm-variable">state</span>[<span class="cm-string">'location'</span>][<span class="cm-number">1</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">-</span> <span class="cm-variable">agent_offset</span>[<span class="cm-number">1</span>])</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">345</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable">agent_color</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-variable">agent</span>.<span class="cm-variable">color</span>]</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">346</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">347</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">if</span> <span class="cm-builtin">hasattr</span>(<span class="cm-variable">agent</span>, <span class="cm-string">'_sprite'</span>) <span class="cm-operator">and</span> <span class="cm-variable">agent</span>.<span class="cm-variable">_sprite</span> <span class="cm-operator">is</span> <span class="cm-operator">not</span> <span class="cm-builtin">None</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">348</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-comment"># Draw agent sprite (image), properly rotated</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">349</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable">rotated_sprite</span> = <span class="cm-variable">agent</span>.<span class="cm-variable">_sprite</span> <span class="cm-keyword">if</span> <span class="cm-variable">state</span>[<span class="cm-string">'heading'</span>] <span class="cm-operator">==</span> (<span class="cm-number">1</span>, <span class="cm-number">0</span>) <span class="cm-keyword">else</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">transform</span>.<span class="cm-variable">rotate</span>(<span class="cm-variable">agent</span>.<span class="cm-variable">_sprite</span>, <span class="cm-number">180</span> <span class="cm-keyword">if</span> <span class="cm-variable">state</span>[<span class="cm-string">'heading'</span>][<span class="cm-number">0</span>] <span class="cm-operator">==</span> <span class="cm-operator">-</span><span class="cm-number">1</span> <span class="cm-keyword">else</span> <span class="cm-variable">state</span>[<span class="cm-string">'heading'</span>][<span class="cm-number">1</span>] <span class="cm-operator">*</span> <span class="cm-operator">-</span><span class="cm-number">90</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">350</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable">rotated_sprite</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">351</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">rect</span>.<span class="cm-variable">Rect</span>(<span class="cm-variable">agent_pos</span>[<span class="cm-number">0</span>] <span class="cm-operator">-</span> <span class="cm-variable">agent</span>.<span class="cm-variable">_sprite_size</span>[<span class="cm-number">0</span>] <span class="cm-operator">/</span> <span class="cm-number">2</span>, <span class="cm-variable">agent_pos</span>[<span class="cm-number">1</span>] <span class="cm-operator">-</span> <span class="cm-variable">agent</span>.<span class="cm-variable">_sprite_size</span>[<span class="cm-number">1</span>] <span class="cm-operator">/</span> <span class="cm-number">2</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">352</div></div><pre class=""><span style="padding-right: 0.1px;">                        <span class="cm-variable">agent</span>.<span class="cm-variable">_sprite_size</span>[<span class="cm-number">0</span>], <span class="cm-variable">agent</span>.<span class="cm-variable">_sprite_size</span>[<span class="cm-number">1</span>]))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">353</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">else</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">354</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-comment"># Draw simple agent (circle with a short line segment poking out to indicate heading)</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">355</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">draw</span>.<span class="cm-variable">circle</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>, <span class="cm-variable">agent_color</span>, <span class="cm-variable">agent_pos</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">agent_circle_radius</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">356</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">draw</span>.<span class="cm-variable">line</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>, <span class="cm-variable">agent_color</span>, <span class="cm-variable">agent_pos</span>, <span class="cm-variable">state</span>[<span class="cm-string">'location'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">357</div></div><pre class=""><span style="padding-right: 0.1px;">            </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">358</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">359</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">if</span> <span class="cm-variable">state</span>[<span class="cm-string">'destination'</span>] <span class="cm-operator">is</span> <span class="cm-operator">not</span> <span class="cm-builtin">None</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">360</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">_logo</span>,</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">361</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">rect</span>.<span class="cm-variable">Rect</span>(<span class="cm-variable">state</span>[<span class="cm-string">'destination'</span>][<span class="cm-number">0</span>] <span class="cm-operator">*</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">-</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>, <span class="cm-error">\</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">362</div></div><pre class=""><span style="padding-right: 0.1px;">                        <span class="cm-variable">state</span>[<span class="cm-string">'destination'</span>][<span class="cm-number">1</span>]<span class="cm-operator">*</span><span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">-</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>, <span class="cm-error">\</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">363</div></div><pre class=""><span style="padding-right: 0.1px;">                        <span class="cm-variable">state</span>[<span class="cm-string">'destination'</span>][<span class="cm-number">0</span>]<span class="cm-operator">*</span><span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">+</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>, <span class="cm-error">\</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">364</div></div><pre class=""><span style="padding-right: 0.1px;">                        <span class="cm-variable">state</span>[<span class="cm-string">'destination'</span>][<span class="cm-number">1</span>]<span class="cm-operator">*</span><span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">block_size</span> <span class="cm-operator">+</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">road_width</span><span class="cm-operator">/</span><span class="cm-number">2</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">365</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">366</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-comment"># * Overlays</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">367</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">font</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">font</span>.<span class="cm-variable">Font</span>(<span class="cm-builtin">None</span>, <span class="cm-number">50</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">368</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-keyword">if</span> <span class="cm-variable">testing</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">369</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"Testing Trial %s"</span><span class="cm-operator">%</span>(<span class="cm-variable">trial</span>), <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'black'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">10</span>, <span class="cm-number">10</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">370</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-keyword">else</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">371</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"Training Trial %s"</span><span class="cm-operator">%</span>(<span class="cm-variable">trial</span>), <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'black'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">10</span>, <span class="cm-number">10</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">372</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">373</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">font</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">font</span>.<span class="cm-variable">Font</span>(<span class="cm-builtin">None</span>, <span class="cm-number">30</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">374</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">375</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-comment"># Status text about each step</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">376</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable">status</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">step_data</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">377</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-keyword">if</span> <span class="cm-variable">status</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">378</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">379</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-comment"># Previous State</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">380</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">if</span> <span class="cm-variable">status</span>[<span class="cm-string">'state'</span>]:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">381</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"Previous State: {}"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">status</span>[<span class="cm-string">'state'</span>]), <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'white'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">350</span>, <span class="cm-number">10</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">382</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">if</span> <span class="cm-operator">not</span> <span class="cm-variable">status</span>[<span class="cm-string">'state'</span>]:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">383</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"!! Agent state not updated!"</span>, <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'maroon'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">350</span>, <span class="cm-number">10</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">384</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">385</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-comment"># Action</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">386</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">if</span> <span class="cm-variable">status</span>[<span class="cm-string">'violation'</span>] <span class="cm-operator">==</span> <span class="cm-number">0</span>: <span class="cm-comment"># Legal</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">387</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">if</span> <span class="cm-variable">status</span>[<span class="cm-string">'action'</span>] <span class="cm-operator">==</span> <span class="cm-builtin">None</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">388</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"No action taken. (rewarded {:.2f})"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">status</span>[<span class="cm-string">'reward'</span>]), <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'dgreen'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">350</span>, <span class="cm-number">40</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">389</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">else</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">390</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"Agent drove {}. (rewarded {:.2f})"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">status</span>[<span class="cm-string">'action'</span>], <span class="cm-variable">status</span>[<span class="cm-string">'reward'</span>]), <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'dgreen'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">350</span>, <span class="cm-number">40</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">391</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">else</span>: <span class="cm-comment"># Illegal</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">392</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">if</span> <span class="cm-variable">status</span>[<span class="cm-string">'action'</span>] <span class="cm-operator">==</span> <span class="cm-builtin">None</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">393</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"No action taken. (rewarded {:.2f})"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">status</span>[<span class="cm-string">'reward'</span>]), <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'maroon'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">350</span>, <span class="cm-number">40</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">394</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">else</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">395</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"{} attempted (rewarded {:.2f})"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">status</span>[<span class="cm-string">'action'</span>], <span class="cm-variable">status</span>[<span class="cm-string">'reward'</span>]), <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'maroon'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">350</span>, <span class="cm-number">40</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">396</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">397</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-comment"># Result</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">398</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">if</span> <span class="cm-variable">status</span>[<span class="cm-string">'violation'</span>] <span class="cm-operator">==</span> <span class="cm-number">0</span>: <span class="cm-comment"># Legal</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">399</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">if</span> <span class="cm-variable">status</span>[<span class="cm-string">'waypoint'</span>] <span class="cm-operator">==</span> <span class="cm-variable">status</span>[<span class="cm-string">'action'</span>]: <span class="cm-comment"># Followed waypoint</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">400</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"Agent followed the waypoint!"</span>, <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'dgreen'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">350</span>, <span class="cm-number">70</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">401</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">elif</span> <span class="cm-variable">status</span>[<span class="cm-string">'action'</span>] <span class="cm-operator">==</span> <span class="cm-builtin">None</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">402</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-keyword">if</span> <span class="cm-variable">status</span>[<span class="cm-string">'light'</span>] <span class="cm-operator">==</span> <span class="cm-string">'red'</span>: <span class="cm-comment"># Stuck at a red light</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">403</div></div><pre class=""><span style="padding-right: 0.1px;">                        <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"Agent idled at a red light!"</span>, <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'dgreen'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">350</span>, <span class="cm-number">70</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">404</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-keyword">else</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">405</div></div><pre class=""><span style="padding-right: 0.1px;">                        <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"Agent idled at a green light with oncoming traffic."</span>, <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'mustard'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">350</span>, <span class="cm-number">70</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">406</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">else</span>: <span class="cm-comment"># Did not follow waypoint</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">407</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"Agent did not follow the waypoint."</span>, <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'mustard'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">350</span>, <span class="cm-number">70</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">408</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">else</span>: <span class="cm-comment"># Illegal</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">409</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">if</span> <span class="cm-variable">status</span>[<span class="cm-string">'violation'</span>] <span class="cm-operator">==</span> <span class="cm-number">1</span>: <span class="cm-comment"># Minor violation</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">410</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"There was a green light with no oncoming traffic."</span>, <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'maroon'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">350</span>, <span class="cm-number">70</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">411</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">elif</span> <span class="cm-variable">status</span>[<span class="cm-string">'violation'</span>] <span class="cm-operator">==</span> <span class="cm-number">2</span>: <span class="cm-comment"># Major violation</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">412</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"There was a red light with no traffic."</span>, <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'maroon'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">350</span>, <span class="cm-number">70</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">413</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">elif</span> <span class="cm-variable">status</span>[<span class="cm-string">'violation'</span>] <span class="cm-operator">==</span> <span class="cm-number">3</span>: <span class="cm-comment"># Minor accident</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">414</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"There was traffic with right-of-way."</span>, <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'maroon'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">350</span>, <span class="cm-number">70</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">415</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">elif</span> <span class="cm-variable">status</span>[<span class="cm-string">'violation'</span>] <span class="cm-operator">==</span> <span class="cm-number">4</span>: <span class="cm-comment"># Major accident</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">416</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"There was a red light with traffic."</span>, <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'maroon'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">350</span>, <span class="cm-number">70</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">417</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">418</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-comment"># Time Remaining</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">419</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">if</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">enforce_deadline</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">420</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable">time</span> = (<span class="cm-variable">status</span>[<span class="cm-string">'deadline'</span>] <span class="cm-operator">-</span> <span class="cm-number">1</span>) <span class="cm-operator">*</span> <span class="cm-number">100.0</span> <span class="cm-operator">/</span> (<span class="cm-variable">status</span>[<span class="cm-string">'t'</span>] <span class="cm-operator">+</span> <span class="cm-variable">status</span>[<span class="cm-string">'deadline'</span>])</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">421</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"{:.0f}% of time remaining to reach destination."</span>.<span class="cm-builtin">format</span>(<span class="cm-variable">time</span>), <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'black'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">350</span>, <span class="cm-number">100</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">422</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">else</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">423</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"Agent not enforced to meet deadline."</span>, <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'black'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">350</span>, <span class="cm-number">100</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">424</div></div><pre class=""><span style="padding-right: 0.1px;">            </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">425</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-comment"># Denote whether a trial was a success or failure</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">426</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">if</span> (<span class="cm-variable">state</span>[<span class="cm-string">'destination'</span>] <span class="cm-operator">!=</span> <span class="cm-variable">state</span>[<span class="cm-string">'location'</span>] <span class="cm-operator">and</span> <span class="cm-variable">state</span>[<span class="cm-string">'deadline'</span>] <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>) <span class="cm-operator">or</span> (<span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">enforce_deadline</span> <span class="cm-operator">is</span> <span class="cm-operator">not</span> <span class="cm-builtin">True</span> <span class="cm-operator">and</span> <span class="cm-variable">state</span>[<span class="cm-string">'destination'</span>] <span class="cm-operator">!=</span> <span class="cm-variable">state</span>[<span class="cm-string">'location'</span>]):</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">427</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-variable-2">self</span>.<span class="cm-variable">font</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">font</span>.<span class="cm-variable">Font</span>(<span class="cm-builtin">None</span>, <span class="cm-number">40</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">428</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">if</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">success</span> <span class="cm-operator">==</span> <span class="cm-builtin">True</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">429</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"Previous Trial: Success"</span>, <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'dgreen'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">10</span>, <span class="cm-number">50</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">430</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">if</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">success</span> <span class="cm-operator">==</span> <span class="cm-builtin">False</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">431</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"Previous Trial: Failure"</span>, <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'maroon'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">10</span>, <span class="cm-number">50</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">432</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">433</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">if</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">primary_agent</span>.<span class="cm-variable">learning</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">434</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">font</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">font</span>.<span class="cm-variable">Font</span>(<span class="cm-builtin">None</span>, <span class="cm-number">22</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">435</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"epsilon = {:.4f}"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">primary_agent</span>.<span class="cm-variable">epsilon</span>), <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'black'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">10</span>, <span class="cm-number">80</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">436</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"alpha = {:.4f}"</span>.<span class="cm-builtin">format</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">env</span>.<span class="cm-variable">primary_agent</span>.<span class="cm-variable">alpha</span>), <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'black'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">10</span>, <span class="cm-number">95</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">437</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">438</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-comment"># Reset status text</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">439</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-keyword">else</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">440</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">rect</span>.<span class="cm-variable">Rect</span>(<span class="cm-number">350</span>, <span class="cm-number">10</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">width</span>, <span class="cm-number">200</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">441</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable-2">self</span>.<span class="cm-variable">font</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">font</span>.<span class="cm-variable">Font</span>(<span class="cm-builtin">None</span>, <span class="cm-number">40</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">442</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-string">"Simulating trial. . ."</span>, <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'white'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">400</span>, <span class="cm-number">60</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">443</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">444</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">445</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-comment"># Flip buffers</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">446</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">display</span>.<span class="cm-variable">flip</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">447</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">448</div></div><pre class=""><span style="padding-right: 0.1px;">    <span class="cm-keyword">def</span> <span class="cm-def">pause</span>(<span class="cm-variable-2">self</span>):</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">449</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-string">""" When the GUI is enabled, this function will pause the simulation. """</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">450</div></div><pre class=""><span style="padding-right: 0.1px;">        </span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">451</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable">abs_pause_time</span> = <span class="cm-variable">time</span>.<span class="cm-variable">time</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">452</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">font</span> = <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">font</span>.<span class="cm-variable">Font</span>(<span class="cm-builtin">None</span>, <span class="cm-number">30</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">453</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable">pause_text</span> = <span class="cm-string">"Simulation Paused. Press any key to continue. . ."</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">454</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-variable">pause_text</span>, <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">colors</span>[<span class="cm-string">'red'</span>], <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">400</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">height</span> <span class="cm-operator">-</span> <span class="cm-number">30</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">455</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">display</span>.<span class="cm-variable">flip</span>()</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">456</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-keyword">print</span> <span class="cm-variable">pause_text</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">457</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-keyword">while</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">paused</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">458</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-keyword">for</span> <span class="cm-variable">event</span> <span class="cm-keyword">in</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">event</span>.<span class="cm-variable">get</span>():</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">459</div></div><pre class=""><span style="padding-right: 0.1px;">                <span class="cm-keyword">if</span> <span class="cm-variable">event</span>.<span class="cm-builtin">type</span> <span class="cm-operator">==</span> <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">KEYDOWN</span>:</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">460</div></div><pre class=""><span style="padding-right: 0.1px;">                    <span class="cm-variable-2">self</span>.<span class="cm-variable">paused</span> = <span class="cm-builtin">False</span></span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">461</div></div><pre class=""><span style="padding-right: 0.1px;">            <span class="cm-variable-2">self</span>.<span class="cm-variable">pygame</span>.<span class="cm-variable">time</span>.<span class="cm-variable">wait</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">frame_delay</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">462</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">screen</span>.<span class="cm-variable">blit</span>(<span class="cm-variable-2">self</span>.<span class="cm-variable">font</span>.<span class="cm-variable">render</span>(<span class="cm-variable">pause_text</span>, <span class="cm-builtin">True</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">bg_color</span>), (<span class="cm-number">400</span>, <span class="cm-variable-2">self</span>.<span class="cm-variable">height</span> <span class="cm-operator">-</span> <span class="cm-number">30</span>))</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">463</div></div><pre class=""><span style="padding-right: 0.1px;">        <span class="cm-variable-2">self</span>.<span class="cm-variable">start_time</span> += (<span class="cm-variable">time</span>.<span class="cm-variable">time</span>() <span class="cm-operator">-</span> <span class="cm-variable">abs_pause_time</span>)</span></pre></div><div style="position: relative;"><div class="CodeMirror-gutter-wrapper" style="left: -44px; width: 44px;"><div class="CodeMirror-linenumber CodeMirror-gutter-elt" style="left: 0px; width: 36px;">464</div></div><pre class=""><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div></div><div style="position: absolute; height: 15px; width: 1px; top: 7432px;"></div><div class="CodeMirror-gutters" style="height: 7447px;"><div class="CodeMirror-gutter CodeMirror-linenumbers" style="width: 44px;"></div></div></div></div></div></div> </div><!-- end ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">smartcab/smartcab/planner.py</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">smartcab/smartcab/environment.py</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">smartcab/smartcab/agent.py</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">smartcab/smartcab/__init__.py</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">smartcab/project_description.md</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">smartcab/README.md</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">finding_donors/visuals.py</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">finding_donors/reportV2.html</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">finding_donors/reportV1.html</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">finding_donors/project_description.md</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">finding_donors/Udacity_Reviews_V1_files/udacity-base.min.css</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">finding_donors/Udacity_Reviews_V1_files/grading_29bb7e1c.css</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">finding_donors/Udacity_Reviews_V1.html</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">finding_donors/README.md</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">digit_recognition/project_description.md</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">digit_recognition/README.md</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">customer_segments/visuals.py</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">customer_segments/project_description.md</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">customer_segments/README.md</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">capstone/proposal_project_description.md</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">capstone/open_projects/robot_motion_planning/tester.py</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">capstone/open_projects/robot_motion_planning/test_maze_03.txt</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">capstone/open_projects/robot_motion_planning/test_maze_02.txt</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">capstone/open_projects/robot_motion_planning/test_maze_01.txt</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">capstone/open_projects/robot_motion_planning/showmaze.py</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">capstone/open_projects/robot_motion_planning/robot.py</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">capstone/open_projects/robot_motion_planning/maze.py</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">capstone/capstone_report_template.md</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">capstone/capstone_proposal_template.md</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">capstone/README.md</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">boston_housing/visuals.py</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">boston_housing/project_description.md</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">boston_housing/boston_housing_Shun.html</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">boston_housing/UdacityReviews_Submission1_files/udacity-base.min.css</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">boston_housing/UdacityReviews_Submission1_files/grading_059d7209.css</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">boston_housing/UdacityReviews_Submission1.html</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">boston_housing/README.md</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --><div class="code-section-item ng-scope" ng-repeat="file in files" ng-show="isFileVisible(file)"> <div class="code-section-item-title" ng-click="setCurrentFileIndex($index)"> <small> <span ng-class="{&#39;glyphicon-triangle-right&#39;: currentFileIndex !== $index, &#39;glyphicon-triangle-bottom&#39;: currentFileIndex === $index}" class="glyphicon glyphicon-triangle-right"> </span> </small> <strong class="ng-binding">README.md</strong> <!-- ngIf: file.comments_count > 0 --> </div> <!-- ngIf: currentFileIndex === $index --> </div><!-- end ngRepeat: file in files --> </div><!-- end ngIf: files && currentRubric --> <div class="row row-gap-medium"></div> </section> <section ng-show="isCurrentTab(&#39;annotation&#39;)" class="ng-hide"> <div class="row row-gap-large"> <div class="col-xs-12 annotation-text ng-scope" translate="">Your reviewer has provided annotations for your project</div> </div> <div class="row row-gap-medium"> <div class="col-xs-12"> <a class="btn btn-primary btn-sm ng-binding" href="https://review.udacity.com/" download="" _target="_blank">Download annotations</a> </div> </div> <div class="row row-gap-huge"></div> </section> <!-- ngIf: critiquesAccessor --><section ng-if="critiquesAccessor" ng-show="isCurrentTab(&#39;feedback&#39;)" class="ng-scope" style=""> <!-- ngIf: isSubmissionByCurrentUser() --><div social-share="" ng-if="isSubmissionByCurrentUser()" user-type="&#39;student&#39;" button-hashtag="hashtag" url="getShareableUrl()" prompt="&#39;Share your accomplishment&#39;" text="&#39;Just received helpful feedback on my project from a @Udacity reviewer!&#39;" class="ng-scope ng-isolate-scope"><div class="share-table hidden-xs"> <div class="share-prompt ng-binding"> Share your accomplishment </div> <div class="pull-right"> <a ng-click="showTwitterPopup()" class="btn btn-xs"> <img src="./Udacity_Reviews_V2_files/twitter.svg"> </a> <a ng-click="showFacebookPopup()" class="btn btn-xs"> <img src="./Udacity_Reviews_V2_files/facebook.svg"> </a> </div> </div> <div class="btn-block share-table visible-xs ng-binding"> Share your accomplishment!&nbsp;<a href="https://review.udacity.com/" ng-click="showTwitterPopup()"><img src="./Udacity_Reviews_V2_files/twitter.svg"></a>&nbsp;<a href="https://review.udacity.com/" ng-click="showFacebookPopup()"><img src="./Udacity_Reviews_V2_files/facebook.svg"></a> </div> </div><!-- end ngIf: isSubmissionByCurrentUser() --> <!-- ngIf: isSubmissionGradedByCurrentUser() --> <!-- ngIf: hasFeedback && submission.result --><div ng-if="hasFeedback &amp;&amp; submission.result" class="ng-scope"> <h3 class="result-label h-slim-top ng-binding"> Meets Specifications </h3> <!-- ngIf: doesNotMeetCount > 0 --> </div><!-- end ngIf: hasFeedback && submission.result --> <!-- ngIf: submission.general_comment --><div ng-if="submission.general_comment" class="row row-gap-medium ng-scope"> <div class="col-xs-12 ng-isolate-scope" marked="submission.general_comment"><p>Hey,</p>
<p>You have done well in updating the project from last time. The analysis in the report is insightful and the coding has been flawless. There are some sections that can be improved to further enhance the report and I strongly suggest incorporating them if you want to showcase the project in your portfolio. Keep up the hard work and good luck for the rest of the nanodegree!</p>
</div> </div><!-- end ngIf: submission.general_comment --> <div critiques-editor="" critiques-accessor="critiquesAccessor" editable="false" class="ng-isolate-scope"><!-- ngRepeat: section in critiquesAccessor.getSections() --><div ng-repeat="section in critiquesAccessor.getSections()" class="ng-scope"> <div section-critiques="" section="section" critiques="critiquesAccessor.getCritiques(section.id)" editable="editable" failed-required-placeholder="failedRequiredPlaceholder" passed-required-placeholder="passedRequiredPlaceholder" optional-placeholder="optionalPlaceholder" state="sectionCritiquesState[section.id]" class="ng-isolate-scope"><div> <div class="row row-gap-small"></div> <h3 class="section-name ng-binding"> Exploring the Data </h3> <div> <!-- ngRepeat: critique in critiques --><div ng-repeat="critique in critiques" class="ng-scope"> <div row="" row-gap-small="" col-xs-12="" bg-white"="" scroll-if="isCurrentEditingCritique(critique.id)" class="ng-isolate-scope"> <!-- ngIf: isEditingCritique(critique.id) --> <!-- ngIf: !isEditingCritique(critique.id) --><div class="critique-container ng-scope ng-isolate-scope" critique-view="" critique="critique" editable="editable" edit-clicked="setEditingCritique(critique.id, true)" ng-if="!isEditingCritique(critique.id)"><div class="critique-view-header"> <div class="row result-label"> <div class="col-sm-1"> <div class="result-spacing"> <span class="result-icon passed text-center"></span> </div> </div> <div class="col-xs-12 col-sm-10 critique-description ng-isolate-scope" marked="rubricItem.passed_description"><p>Student's implementation correctly calculates the following:</p>
<ul>
<li>Number of records</li>
<li>Number of individuals with income &gt;$50,000</li>
<li>Number of individuals with income &lt;=$50,000</li>
<li>Percentage of individuals with income &gt; $50,000</li>
</ul>
</div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: !!critique.observation --><div ng-if="!!critique.observation" class="critique-view-body ng-scope"> <div class="row"> <div class="col-xs-12 col-sm-10 col-sm-offset-1"> <div class="p-slim ng-isolate-scope" marked="critique.observation"><p>Great job getting the dataset statistics! Can you notice a class imbalance here?</p>
</div> </div> </div> </div><!-- end ngIf: !!critique.observation --> <!-- ngIf: editable && !critiqueLocked() --> </div><!-- end ngIf: !isEditingCritique(critique.id) --> </div> </div><!-- end ngRepeat: critique in critiques --> </div> </div> </div> </div><!-- end ngRepeat: section in critiquesAccessor.getSections() --><div ng-repeat="section in critiquesAccessor.getSections()" class="ng-scope"> <div section-critiques="" section="section" critiques="critiquesAccessor.getCritiques(section.id)" editable="editable" failed-required-placeholder="failedRequiredPlaceholder" passed-required-placeholder="passedRequiredPlaceholder" optional-placeholder="optionalPlaceholder" state="sectionCritiquesState[section.id]" class="ng-isolate-scope"><div> <div class="row row-gap-small"></div> <h3 class="section-name ng-binding"> Preparing the Data </h3> <div> <!-- ngRepeat: critique in critiques --><div ng-repeat="critique in critiques" class="ng-scope"> <div row="" row-gap-small="" col-xs-12="" bg-white"="" scroll-if="isCurrentEditingCritique(critique.id)" class="ng-isolate-scope"> <!-- ngIf: isEditingCritique(critique.id) --> <!-- ngIf: !isEditingCritique(critique.id) --><div class="critique-container ng-scope ng-isolate-scope" critique-view="" critique="critique" editable="editable" edit-clicked="setEditingCritique(critique.id, true)" ng-if="!isEditingCritique(critique.id)"><div class="critique-view-header"> <div class="row result-label"> <div class="col-sm-1"> <div class="result-spacing"> <span class="result-icon passed text-center"></span> </div> </div> <div class="col-xs-12 col-sm-10 critique-description ng-isolate-scope" marked="rubricItem.passed_description"><p>Student correctly implements one-hot encoding for the feature and income data.</p>
</div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: !!critique.observation --><div ng-if="!!critique.observation" class="critique-view-body ng-scope"> <div class="row"> <div class="col-xs-12 col-sm-10 col-sm-offset-1"> <div class="p-slim ng-isolate-scope" marked="critique.observation"><p>Good work encoding the features and target label. You can also use <a href="http://scikit-learn.org/stable/modules/generated/sklearn.preprocessing.LabelEncoder.html" target="_blank">Label Encoder</a> from sklearn or <code>get_dummies</code> in pandas:</p>
<pre><code><span class="hljs-tag">pd</span><span class="hljs-class">.get_dummies</span>(<span class="hljs-tag">income_raw</span>)<span class="hljs-attr_selector">['&gt;50K']</span>
</code></pre></div> </div> </div> </div><!-- end ngIf: !!critique.observation --> <!-- ngIf: editable && !critiqueLocked() --> </div><!-- end ngIf: !isEditingCritique(critique.id) --> </div> </div><!-- end ngRepeat: critique in critiques --> </div> </div> </div> </div><!-- end ngRepeat: section in critiquesAccessor.getSections() --><div ng-repeat="section in critiquesAccessor.getSections()" class="ng-scope"> <div section-critiques="" section="section" critiques="critiquesAccessor.getCritiques(section.id)" editable="editable" failed-required-placeholder="failedRequiredPlaceholder" passed-required-placeholder="passedRequiredPlaceholder" optional-placeholder="optionalPlaceholder" state="sectionCritiquesState[section.id]" class="ng-isolate-scope"><div> <div class="row row-gap-small"></div> <h3 class="section-name ng-binding"> Evaluating Model Performance </h3> <div> <!-- ngRepeat: critique in critiques --><div ng-repeat="critique in critiques" class="ng-scope"> <div row="" row-gap-small="" col-xs-12="" bg-white"="" scroll-if="isCurrentEditingCritique(critique.id)" class="ng-isolate-scope"> <!-- ngIf: isEditingCritique(critique.id) --> <!-- ngIf: !isEditingCritique(critique.id) --><div class="critique-container ng-scope ng-isolate-scope" critique-view="" critique="critique" editable="editable" edit-clicked="setEditingCritique(critique.id, true)" ng-if="!isEditingCritique(critique.id)"><div class="critique-view-header"> <div class="row result-label"> <div class="col-sm-1"> <div class="result-spacing"> <span class="result-icon passed text-center"></span> </div> </div> <div class="col-xs-12 col-sm-10 critique-description ng-isolate-scope" marked="rubricItem.passed_description"><p>Student correctly calculates the benchmark score of the naive predictor for both accuracy and F1 scores.</p>
</div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: !!critique.observation --> <!-- ngIf: editable && !critiqueLocked() --> </div><!-- end ngIf: !isEditingCritique(critique.id) --> </div> </div><!-- end ngRepeat: critique in critiques --><div ng-repeat="critique in critiques" class="ng-scope"> <div row="" row-gap-small="" col-xs-12="" bg-white"="" scroll-if="isCurrentEditingCritique(critique.id)" class="ng-isolate-scope"> <!-- ngIf: isEditingCritique(critique.id) --> <!-- ngIf: !isEditingCritique(critique.id) --><div class="critique-container ng-scope ng-isolate-scope" critique-view="" critique="critique" editable="editable" edit-clicked="setEditingCritique(critique.id, true)" ng-if="!isEditingCritique(critique.id)"><div class="critique-view-header"> <div class="row result-label"> <div class="col-sm-1"> <div class="result-spacing"> <span class="result-icon passed text-center"></span> </div> </div> <div class="col-xs-12 col-sm-10 critique-description ng-isolate-scope" marked="rubricItem.passed_description"><p>The pros and cons or application for each model is provided with reasonable justification why each model was chosen to be explored.</p>
<p>Please list all the references you use while listing out your pros and cons.</p>
</div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: !!critique.observation --><div ng-if="!!critique.observation" class="critique-view-body ng-scope"> <div class="row"> <div class="col-xs-12 col-sm-10 col-sm-offset-1"> <div class="p-slim ng-isolate-scope" marked="critique.observation"><p>Good discussion of the three models and their relevance for the problem at hand. For describing KNN, you have mentioned that we have low number of features which is not true, as we have 103 features after encoding. </p>
<p>You can read more on model selection from these links:</p>
<p><a href="http://scikit-learn.org/stable/tutorial/machine_learning_map/" target="_blank">http://scikit-learn.org/stable/tutorial/machine_learning_map/</a><br><a href="https://azure.microsoft.com/en-us/documentation/articles/machine-learning-algorithm-choice/" target="_blank">https://azure.microsoft.com/en-us/documentation/articles/machine-learning-algorithm-choice/</a><br><a href="http://sebastianraschka.com/faq/docs/best-ml-algo.html" target="_blank">http://sebastianraschka.com/faq/docs/best-ml-algo.html</a></p>
</div> </div> </div> </div><!-- end ngIf: !!critique.observation --> <!-- ngIf: editable && !critiqueLocked() --> </div><!-- end ngIf: !isEditingCritique(critique.id) --> </div> </div><!-- end ngRepeat: critique in critiques --><div ng-repeat="critique in critiques" class="ng-scope"> <div row="" row-gap-small="" col-xs-12="" bg-white"="" scroll-if="isCurrentEditingCritique(critique.id)" class="ng-isolate-scope"> <!-- ngIf: isEditingCritique(critique.id) --> <!-- ngIf: !isEditingCritique(critique.id) --><div class="critique-container ng-scope ng-isolate-scope" critique-view="" critique="critique" editable="editable" edit-clicked="setEditingCritique(critique.id, true)" ng-if="!isEditingCritique(critique.id)"><div class="critique-view-header"> <div class="row result-label"> <div class="col-sm-1"> <div class="result-spacing"> <span class="result-icon passed text-center"></span> </div> </div> <div class="col-xs-12 col-sm-10 critique-description ng-isolate-scope" marked="rubricItem.passed_description"><p>Student successfully implements a pipeline in code that will train and predict on the supervised learning algorithm given.</p>
</div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: !!critique.observation --><div ng-if="!!critique.observation" class="critique-view-body ng-scope"> <div class="row"> <div class="col-xs-12 col-sm-10 col-sm-offset-1"> <div class="p-slim ng-isolate-scope" marked="critique.observation"><p>Nice job implementing the pipeline!</p>
</div> </div> </div> </div><!-- end ngIf: !!critique.observation --> <!-- ngIf: editable && !critiqueLocked() --> </div><!-- end ngIf: !isEditingCritique(critique.id) --> </div> </div><!-- end ngRepeat: critique in critiques --><div ng-repeat="critique in critiques" class="ng-scope"> <div row="" row-gap-small="" col-xs-12="" bg-white"="" scroll-if="isCurrentEditingCritique(critique.id)" class="ng-isolate-scope"> <!-- ngIf: isEditingCritique(critique.id) --> <!-- ngIf: !isEditingCritique(critique.id) --><div class="critique-container ng-scope ng-isolate-scope" critique-view="" critique="critique" editable="editable" edit-clicked="setEditingCritique(critique.id, true)" ng-if="!isEditingCritique(critique.id)"><div class="critique-view-header"> <div class="row result-label"> <div class="col-sm-1"> <div class="result-spacing"> <span class="result-icon passed text-center"></span> </div> </div> <div class="col-xs-12 col-sm-10 critique-description ng-isolate-scope" marked="rubricItem.passed_description"><p>Student correctly implements three supervised learning models and produces a performance visualization.</p>
</div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: !!critique.observation --><div ng-if="!!critique.observation" class="critique-view-body ng-scope"> <div class="row"> <div class="col-xs-12 col-sm-10 col-sm-offset-1"> <div class="p-slim ng-isolate-scope" marked="critique.observation"><p>You should use the default parameters for KNeighborsClassifier. This is because we can make an unbiased comparison if we use the default values of parameters for each classifier.</p>
</div> </div> </div> </div><!-- end ngIf: !!critique.observation --> <!-- ngIf: editable && !critiqueLocked() --> </div><!-- end ngIf: !isEditingCritique(critique.id) --> </div> </div><!-- end ngRepeat: critique in critiques --> </div> </div> </div> </div><!-- end ngRepeat: section in critiquesAccessor.getSections() --><div ng-repeat="section in critiquesAccessor.getSections()" class="ng-scope"> <div section-critiques="" section="section" critiques="critiquesAccessor.getCritiques(section.id)" editable="editable" failed-required-placeholder="failedRequiredPlaceholder" passed-required-placeholder="passedRequiredPlaceholder" optional-placeholder="optionalPlaceholder" state="sectionCritiquesState[section.id]" class="ng-isolate-scope"><div> <div class="row row-gap-small"></div> <h3 class="section-name ng-binding"> Improving Results </h3> <div> <!-- ngRepeat: critique in critiques --><div ng-repeat="critique in critiques" class="ng-scope"> <div row="" row-gap-small="" col-xs-12="" bg-white"="" scroll-if="isCurrentEditingCritique(critique.id)" class="ng-isolate-scope"> <!-- ngIf: isEditingCritique(critique.id) --> <!-- ngIf: !isEditingCritique(critique.id) --><div class="critique-container ng-scope ng-isolate-scope" critique-view="" critique="critique" editable="editable" edit-clicked="setEditingCritique(critique.id, true)" ng-if="!isEditingCritique(critique.id)"><div class="critique-view-header"> <div class="row result-label"> <div class="col-sm-1"> <div class="result-spacing"> <span class="result-icon passed text-center"></span> </div> </div> <div class="col-xs-12 col-sm-10 critique-description ng-isolate-scope" marked="rubricItem.passed_description"><p>Justification is provided for which model appears to be the best to use given computational cost, model performance, and the characteristics of the data.</p>
</div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: !!critique.observation --><div ng-if="!!critique.observation" class="critique-view-body ng-scope"> <div class="row"> <div class="col-xs-12 col-sm-10 col-sm-offset-1"> <div class="p-slim ng-isolate-scope" marked="critique.observation"><p>Good discussion as random forests does appear to be the most optimal model among these three. A few things to consider:</p>
<ul>
<li>All the three models appear to be overfitting as the training scores are much higher than the testing scores here.</li>
<li>You should also discuss how the size of the dataset impacts the model. How well does the algorithm scale when we use 1%, 10% and 100% of the data?</li>
<li>You can also try Adaboost or XGBoost (not a part of sklearn) models as I have seen the best scores (for this problem) from these models.</li>
</ul>
</div> </div> </div> </div><!-- end ngIf: !!critique.observation --> <!-- ngIf: editable && !critiqueLocked() --> </div><!-- end ngIf: !isEditingCritique(critique.id) --> </div> </div><!-- end ngRepeat: critique in critiques --><div ng-repeat="critique in critiques" class="ng-scope"> <div row="" row-gap-small="" col-xs-12="" bg-white"="" scroll-if="isCurrentEditingCritique(critique.id)" class="ng-isolate-scope"> <!-- ngIf: isEditingCritique(critique.id) --> <!-- ngIf: !isEditingCritique(critique.id) --><div class="critique-container ng-scope ng-isolate-scope" critique-view="" critique="critique" editable="editable" edit-clicked="setEditingCritique(critique.id, true)" ng-if="!isEditingCritique(critique.id)"><div class="critique-view-header"> <div class="row result-label"> <div class="col-sm-1"> <div class="result-spacing"> <span class="result-icon passed text-center"></span> </div> </div> <div class="col-xs-12 col-sm-10 critique-description ng-isolate-scope" marked="rubricItem.passed_description"><p>Student is able to clearly and concisely describe how the optimal model works in layman's terms to someone who is not familiar with machine learning nor has a technical background.</p>
</div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: !!critique.observation --><div ng-if="!!critique.observation" class="critique-view-body ng-scope"> <div class="row"> <div class="col-xs-12 col-sm-10 col-sm-offset-1"> <div class="p-slim ng-isolate-scope" marked="critique.observation"><p>Excellent work explaining the model using the example!</p>
</div> </div> </div> </div><!-- end ngIf: !!critique.observation --> <!-- ngIf: editable && !critiqueLocked() --> </div><!-- end ngIf: !isEditingCritique(critique.id) --> </div> </div><!-- end ngRepeat: critique in critiques --><div ng-repeat="critique in critiques" class="ng-scope"> <div row="" row-gap-small="" col-xs-12="" bg-white"="" scroll-if="isCurrentEditingCritique(critique.id)" class="ng-isolate-scope"> <!-- ngIf: isEditingCritique(critique.id) --> <!-- ngIf: !isEditingCritique(critique.id) --><div class="critique-container ng-scope ng-isolate-scope" critique-view="" critique="critique" editable="editable" edit-clicked="setEditingCritique(critique.id, true)" ng-if="!isEditingCritique(critique.id)"><div class="critique-view-header"> <div class="row result-label"> <div class="col-sm-1"> <div class="result-spacing"> <span class="result-icon passed text-center"></span> </div> </div> <div class="col-xs-12 col-sm-10 critique-description ng-isolate-scope" marked="rubricItem.passed_description"><p>The final model chosen is correctly tuned using grid search with at least one parameter using at least three settings. If the model does not need any parameter tuning it is explicitly stated with reasonable justification.</p>
</div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: !!critique.observation --><div ng-if="!!critique.observation" class="critique-view-body ng-scope"> <div class="row"> <div class="col-xs-12 col-sm-10 col-sm-offset-1"> <div class="p-slim ng-isolate-scope" marked="critique.observation"><p>Good job tuning the model using GridSearch. You can use <a href="http://scikit-learn.org/stable/modules/generated/sklearn.model_selection.StratifiedShuffleSplit.html" target="_blank">StratifiedShuffleSplit</a> to ensure a more even split of labels between training and validation sets.</p>
<p>To print the optimal parameters, you can simply use <code>print best_clf</code></p>
</div> </div> </div> </div><!-- end ngIf: !!critique.observation --> <!-- ngIf: editable && !critiqueLocked() --> </div><!-- end ngIf: !isEditingCritique(critique.id) --> </div> </div><!-- end ngRepeat: critique in critiques --><div ng-repeat="critique in critiques" class="ng-scope"> <div row="" row-gap-small="" col-xs-12="" bg-white"="" scroll-if="isCurrentEditingCritique(critique.id)" class="ng-isolate-scope"> <!-- ngIf: isEditingCritique(critique.id) --> <!-- ngIf: !isEditingCritique(critique.id) --><div class="critique-container ng-scope ng-isolate-scope" critique-view="" critique="critique" editable="editable" edit-clicked="setEditingCritique(critique.id, true)" ng-if="!isEditingCritique(critique.id)"><div class="critique-view-header"> <div class="row result-label"> <div class="col-sm-1"> <div class="result-spacing"> <span class="result-icon passed text-center"></span> </div> </div> <div class="col-xs-12 col-sm-10 critique-description ng-isolate-scope" marked="rubricItem.passed_description"><p>Student reports the accuracy and F1 score of the optimized, unoptimized, and benchmark models correctly in the table provided. Student compares the final model results to previous results obtained.</p>
</div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: !!critique.observation --><div ng-if="!!critique.observation" class="critique-view-body ng-scope"> <div class="row"> <div class="col-xs-12 col-sm-10 col-sm-offset-1"> <div class="p-slim ng-isolate-scope" marked="critique.observation"><p>The optimized model did improve the results. The model is still overfitting, but not to the same extent. Perhaps tuning the base estimator (decision tree in this case) would help in improving the score further. </p>
<p>Apart from GridSearch, <a href="https://review.udacity.com/scikit-learn.org/stable/modules/generated/sklearn.model_selection.RandomizedSearchCV.html" target="_blank">RandomizedSearchCV</a> is also used for parameter tuning as it gives similar performance with a much faster training time.</p>
</div> </div> </div> </div><!-- end ngIf: !!critique.observation --> <!-- ngIf: editable && !critiqueLocked() --> </div><!-- end ngIf: !isEditingCritique(critique.id) --> </div> </div><!-- end ngRepeat: critique in critiques --> </div> </div> </div> </div><!-- end ngRepeat: section in critiquesAccessor.getSections() --><div ng-repeat="section in critiquesAccessor.getSections()" class="ng-scope"> <div section-critiques="" section="section" critiques="critiquesAccessor.getCritiques(section.id)" editable="editable" failed-required-placeholder="failedRequiredPlaceholder" passed-required-placeholder="passedRequiredPlaceholder" optional-placeholder="optionalPlaceholder" state="sectionCritiquesState[section.id]" class="ng-isolate-scope"><div> <div class="row row-gap-small"></div> <h3 class="section-name ng-binding"> Feature Importance </h3> <div> <!-- ngRepeat: critique in critiques --><div ng-repeat="critique in critiques" class="ng-scope"> <div row="" row-gap-small="" col-xs-12="" bg-white"="" scroll-if="isCurrentEditingCritique(critique.id)" class="ng-isolate-scope"> <!-- ngIf: isEditingCritique(critique.id) --> <!-- ngIf: !isEditingCritique(critique.id) --><div class="critique-container ng-scope ng-isolate-scope" critique-view="" critique="critique" editable="editable" edit-clicked="setEditingCritique(critique.id, true)" ng-if="!isEditingCritique(critique.id)"><div class="critique-view-header"> <div class="row result-label"> <div class="col-sm-1"> <div class="result-spacing"> <span class="result-icon passed text-center"></span> </div> </div> <div class="col-xs-12 col-sm-10 critique-description ng-isolate-scope" marked="rubricItem.passed_description"><p>Student ranks five features which they believe to be the most relevant for predicting an individual's’ income. Discussion is provided for why these features were chosen.</p>
</div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: !!critique.observation --><div ng-if="!!critique.observation" class="critique-view-body ng-scope"> <div class="row"> <div class="col-xs-12 col-sm-10 col-sm-offset-1"> <div class="p-slim ng-isolate-scope" marked="critique.observation"><p>You have done a great job with the analysis. However, this question only asked for your intuition, so the hypothesis could be compared with the model's feature importances in the next section. This would be something like:</p>
<ul>
<li>education - I chose this feature because people with more advanced degrees tend to earn more. </li>
<li>age - people with more experience tend to have higher income</li>
</ul>
<p>and so on.</p>
</div> </div> </div> </div><!-- end ngIf: !!critique.observation --> <!-- ngIf: editable && !critiqueLocked() --> </div><!-- end ngIf: !isEditingCritique(critique.id) --> </div> </div><!-- end ngRepeat: critique in critiques --><div ng-repeat="critique in critiques" class="ng-scope"> <div row="" row-gap-small="" col-xs-12="" bg-white"="" scroll-if="isCurrentEditingCritique(critique.id)" class="ng-isolate-scope"> <!-- ngIf: isEditingCritique(critique.id) --> <!-- ngIf: !isEditingCritique(critique.id) --><div class="critique-container ng-scope ng-isolate-scope" critique-view="" critique="critique" editable="editable" edit-clicked="setEditingCritique(critique.id, true)" ng-if="!isEditingCritique(critique.id)"><div class="critique-view-header"> <div class="row result-label"> <div class="col-sm-1"> <div class="result-spacing"> <span class="result-icon passed text-center"></span> </div> </div> <div class="col-xs-12 col-sm-10 critique-description ng-isolate-scope" marked="rubricItem.passed_description"><p>Student correctly implements a supervised learning model that makes use of the <code>feature_importances_</code> attribute. Additionally, student discusses the differences or similarities between the features they considered relevant and the reported relevant features.</p>
</div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: !!critique.observation --><div ng-if="!!critique.observation" class="critique-view-body ng-scope"> <div class="row"> <div class="col-xs-12 col-sm-10 col-sm-offset-1"> <div class="p-slim ng-isolate-scope" marked="critique.observation"><p>You would then compare your intuitions with the actual results here. </p>
<p><strong>Suggestion</strong><br>Another idea is to use <a href="http://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.SelectKBest.html" target="_blank">SelectKBest</a> from sklearn.</p>
</div> </div> </div> </div><!-- end ngIf: !!critique.observation --> <!-- ngIf: editable && !critiqueLocked() --> </div><!-- end ngIf: !isEditingCritique(critique.id) --> </div> </div><!-- end ngRepeat: critique in critiques --><div ng-repeat="critique in critiques" class="ng-scope"> <div row="" row-gap-small="" col-xs-12="" bg-white"="" scroll-if="isCurrentEditingCritique(critique.id)" class="ng-isolate-scope"> <!-- ngIf: isEditingCritique(critique.id) --> <!-- ngIf: !isEditingCritique(critique.id) --><div class="critique-container ng-scope ng-isolate-scope" critique-view="" critique="critique" editable="editable" edit-clicked="setEditingCritique(critique.id, true)" ng-if="!isEditingCritique(critique.id)"><div class="critique-view-header"> <div class="row result-label"> <div class="col-sm-1"> <div class="result-spacing"> <span class="result-icon passed text-center"></span> </div> </div> <div class="col-xs-12 col-sm-10 critique-description ng-isolate-scope" marked="rubricItem.passed_description"><p>Student analyzes the final model's performance when only the top 5 features are used and compares this performance to the optimized model from <strong>Question 5</strong>.</p>
</div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: editable && critiqueLocked() --> </div> <!-- ngIf: !!critique.observation --><div ng-if="!!critique.observation" class="critique-view-body ng-scope"> <div class="row"> <div class="col-xs-12 col-sm-10 col-sm-offset-1"> <div class="p-slim ng-isolate-scope" marked="critique.observation"><p>Apart from feature selection, another idea to reduce the size of the dataset is PCA or Principal Component Analysis. You will find out more about this in the next project.</p>
</div> </div> </div> </div><!-- end ngIf: !!critique.observation --> <!-- ngIf: editable && !critiqueLocked() --> </div><!-- end ngIf: !isEditingCritique(critique.id) --> </div> </div><!-- end ngRepeat: critique in critiques --> </div> </div> </div> </div><!-- end ngRepeat: section in critiquesAccessor.getSections() --> <div class="row"> <!-- ngIf: !editable && submission.general_comment --> </div> <div class="row"> <!-- ngIf: !(state && state.audit) --><ng-form ng-if="!(state &amp;&amp; state.audit)" name="general-comment-form" class="ng-pristine ng-valid ng-scope"> <!-- ngIf: editable --> </ng-form><!-- end ngIf: !(state && state.audit) --> </div> <div class="row row-gap-small"></div> </div> <div class="row row-gap-small"></div> <!-- ngIf: isResubmittable() --> <div class="row row-gap-small"> <div class="col-xs-12 text-center"> <!-- ngIf: submission.archive_url --><a class="wide-and-bold ng-binding ng-scope" ng-if="submission.archive_url" href="https://udacity-reviews-uploads.s3.amazonaws.com/_submissions/zipfile/623121/archive.zip" download=""> <img src="./Udacity_Reviews_V2_files/download-icon.svg" class="icon-medium">&nbsp;Download Project </a><!-- end ngIf: submission.archive_url --> </div> </div> <!-- ngIf: commentsCount > 0 --> <div class="row row-gap-medium"></div> </section><!-- end ngIf: critiquesAccessor --> <section ng-show="isCurrentTab(&#39;audit&#39;)" class="ng-hide"> <div audit-tab="" submission="submission" state="auditTabState" class="ng-isolate-scope"><!-- ngIf: auditCritiquesAccessor --> </div> </section> </div>  </div>  </div>  </div>  </div>  </div>  <div ng-show="isCurrentTab(&#39;feedback&#39;) || isUngradeable()" class="ng-scope" style=""> <!-- ngIf: !hasViewedResubmissionVideo() && isResubmittable() --> </div> <!-- ngIf: hasViewedResubmissionVideo() && isResubmittable() || isSubmissionByCurrentUser() --><div ng-if="hasViewedResubmissionVideo() &amp;&amp; isResubmittable() || isSubmissionByCurrentUser()" class="row row-gap-medium ng-scope"> <div class="col-md-10 col-md-offset-1 text-center"> <!-- ngIf: hasViewedResubmissionVideo() && isResubmittable() --> </div> </div><!-- end ngIf: hasViewedResubmissionVideo() && isResubmittable() || isSubmissionByCurrentUser() --> <div class="row row-gap-large ng-scope"></div> <!-- ngIf: isSubmissionByCurrentUser() && currentProject.nanodegree_key --><div ng-if="isSubmissionByCurrentUser() &amp;&amp; currentProject.nanodegree_key" class="row row-gap-medium ng-scope"> <div class="col-xs-12 text-center"> <a class="btn btn-secondary ng-binding" ng-click="goToPath()">Return to Path</a> </div> </div><!-- end ngIf: isSubmissionByCurrentUser() && currentProject.nanodegree_key -->  <div class="visible-xs row row-gap-medium ng-scope"> <div class="col-xs-12"> <div ng-show="!isUngradeable() &amp;&amp; showStudentFeedback" class="locked-feedback-footer ng-hide"> <div ng-switch="hoverValue"> <!-- ngSwitchWhen: 1 --> <!-- ngSwitchWhen: 2 --> <!-- ngSwitchWhen: 3 --> <!-- ngSwitchWhen: 4 --> <!-- ngSwitchWhen: 5 --> <!-- ngSwitchDefault:  --><span ng-switch-default="" class="ng-binding ng-scope">Rate this review</span><!-- end ngSwitchWhen: --> </div> <div class="star-rating"> <span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="5" aria-valuenow="5" aria-valuetext="five" uib-rating="" state-on="&#39;feedback-star-on&#39;" state-off="&#39;feedback-star-off&#39;" on-leave="hoverValue = null" on-hover="hoverValue = value" ng-model="studentFeedback.rating" class="ng-isolate-scope ng-not-empty ng-valid">
    <!-- ngRepeat: r in range track by $index --><span ng-repeat-start="r in range track by $index" class="sr-only ng-binding ng-scope">(*)</span>
    <i ng-repeat-end="" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon ng-scope feedback-star-on" ng-class="$index &lt; value &amp;&amp; (r.stateOn || &#39;glyphicon-star&#39;) || (r.stateOff || &#39;glyphicon-star-empty&#39;)" ng-attr-title="{{r.title}}" title="one" style=""></i><!-- end ngRepeat: r in range track by $index --><span ng-repeat-start="r in range track by $index" class="sr-only ng-binding ng-scope">(*)</span>
    <i ng-repeat-end="" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon ng-scope feedback-star-on" ng-class="$index &lt; value &amp;&amp; (r.stateOn || &#39;glyphicon-star&#39;) || (r.stateOff || &#39;glyphicon-star-empty&#39;)" ng-attr-title="{{r.title}}" title="two"></i><!-- end ngRepeat: r in range track by $index --><span ng-repeat-start="r in range track by $index" class="sr-only ng-binding ng-scope">(*)</span>
    <i ng-repeat-end="" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon ng-scope feedback-star-on" ng-class="$index &lt; value &amp;&amp; (r.stateOn || &#39;glyphicon-star&#39;) || (r.stateOff || &#39;glyphicon-star-empty&#39;)" ng-attr-title="{{r.title}}" title="three"></i><!-- end ngRepeat: r in range track by $index --><span ng-repeat-start="r in range track by $index" class="sr-only ng-binding ng-scope">(*)</span>
    <i ng-repeat-end="" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon ng-scope feedback-star-on" ng-class="$index &lt; value &amp;&amp; (r.stateOn || &#39;glyphicon-star&#39;) || (r.stateOff || &#39;glyphicon-star-empty&#39;)" ng-attr-title="{{r.title}}" title="four"></i><!-- end ngRepeat: r in range track by $index --><span ng-repeat-start="r in range track by $index" class="sr-only ng-binding ng-scope">(*)</span>
    <i ng-repeat-end="" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon ng-scope feedback-star-on" ng-class="$index &lt; value &amp;&amp; (r.stateOn || &#39;glyphicon-star&#39;) || (r.stateOff || &#39;glyphicon-star-empty&#39;)" ng-attr-title="{{r.title}}" title="five"></i><!-- end ngRepeat: r in range track by $index -->
</span> </div> </div> </div> </div> <!-- ngIf: shouldShowAssessmentFooter() --> <div class="row row-gap-medium ng-scope"></div> <div id="comment-wrapper" class="ng-scope"></div> </div>
      </div> </div> </div>
    </div>

    <!-- ngInclude: main.pageContext.footerURL --><div ng-include="main.pageContext.footerURL" class="ng-scope"><footer id="footer" ng-controller="FooterCtrl as ctrl" class="ng-scope"> <div class="container"> <ul class="nav nav-pills"> <!-- ngIf: currentUser && currentUser.role !== 'student' --> <li><a ui-sref="submissions.student-faq" translate="" class="ng-scope" href="https://review.udacity.com/#!/submissions/student-faq">Student FAQ</a></li> <li><a href="https://reviews.udacity.com/reviewer-agreement" target="blank" translate="" class="ng-scope">Reviewer Agreement</a></li> </ul> </div> </footer> </div>

    <script src="./Udacity_Reviews_V2_files/jquery.min.js"></script>
    <script src="./Udacity_Reviews_V2_files/materialize.min.js"></script>

    <script type="text/javascript" src="./Udacity_Reviews_V2_files/airbrake-shim.js" data-airbrake-project-id="108424" data-airbrake-project-key="585b2c42b7a3ccfb360e6b1461185702" data-airbrake-environment-name="production"></script>
    <script data-airbrake-onload="initAirbrake">
      function initAirbrake() {
        Airbrake.addFilter(function (notice) {
          console.log(notice);
          return true;
        });
      }
    </script>
    <script src="./Udacity_Reviews_V2_files/angular.min.js"></script>

    <!-- inject:js -->
    <script src="./Udacity_Reviews_V2_files/_vendor_332f1759.js"></script>
    <script src="./Udacity_Reviews_V2_files/grading_332f1759.js"></script>
    <script src="./Udacity_Reviews_V2_files/airbrake-shim.js"></script>
    <!-- endinject -->
  

<div class="hiddendiv common"></div></body></html>